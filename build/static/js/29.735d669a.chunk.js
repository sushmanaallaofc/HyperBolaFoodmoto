(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{333:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return s}),a.d(t,"e",function(){return g}),a.d(t,"d",function(){return c}),a.d(t,"c",function(){return u});var n=a(62),r=a(9),l=a(8),o=a.n(l),i=function(e,t){return function(a){o.a.post(r.bb,{email:e,password:t}).then(function(e){var t=e.data;return a({type:n.a,payload:t})}).catch(function(e){console.log(e)})}},s=function(){return function(e){e({type:n.b,payload:[]})}},g=function(e,t){return function(a){o.a.post(r.Db,{token:t,user_id:e}).then(function(e){var t={delivery_user:e.data,order_history:e.data.data.orders};return a({type:n.d,payload:t})}).catch(function(e){console.log(e)})}},c=function(e){return function(t){t({type:n.c,payload:e})}},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(a){return o.a.post(r.Cb,{token:e,toggle_status:!0,force_offline:t}).then(function(e){var t={delivery_user:e.data,order_history:e.data.data.orders};return a({type:n.d,payload:t})}).catch(function(e){console.log(e)})}}},473:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(4),l=a(6),o=a(5),i=a(7),s=a(0),g=a.n(s),c=a(49),u=a(514),d=a(17),m=a(41),p=a(333),f=a(29),v=a(12),h=a(123),y=a.n(h),b=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).state={loading:!1,email:"",password:"",error:!1},a.handleOnChange=function(e){a.props.getSingleLanguageData(e.target.value),localStorage.setItem("userPreferedLanguage",e.target.value)},a.handleInputEmail=function(e){a.setState({email:e.target.value.trim()})},a.handleInputPassword=function(e){a.setState({password:e.target.value})},a.handleLogin=function(e){e.preventDefault(),a.setState({loading:!0}),a.props.loginDeliveryUser(a.state.email,a.state.password)},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.getSettings(),this.props.getAllLanguages(),document.getElementsByTagName("body")[0].classList.remove("bg-grey"),document.getElementsByTagName("body")[0].classList.add("delivery-dark-bg")}},{key:"componentWillReceiveProps",value:function(e){if(this.props.delivery_user!==e.delivery_user&&(this.setState({loading:!1}),!1===e.delivery_user.success&&this.setState({error:!0})),e.delivery_user.success&&"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android&&window.Android.registerFcm(e.delivery_user.data.auth_token,e.delivery_user.data.id),this.props.languages!==e.languages)if(localStorage.getItem("userPreferedLanguage"))this.props.getSingleLanguageData(localStorage.getItem("userPreferedLanguage"));else if(e.languages.length){var t=e.languages.filter(function(e){return 1===e.is_default})[0].id;this.props.getSingleLanguageData(t)}}},{key:"render",value:function(){return this.props.delivery_user.success?g.a.createElement(u.a,{to:"/delivery"}):g.a.createElement(g.a.Fragment,null,g.a.createElement(c.a,{seotitle:"Login",seodescription:localStorage.getItem("seoMetaDescription"),ogtype:"website",ogtitle:localStorage.getItem("seoOgTitle"),ogdescription:localStorage.getItem("seoOgDescription"),ogurl:window.location.href,twittertitle:localStorage.getItem("seoTwitterTitle"),twitterdescription:localStorage.getItem("seoTwitterDescription")}),this.state.error&&g.a.createElement("div",{className:"auth-error"},g.a.createElement("div",{className:"error-shake"},localStorage.getItem("emailPassDonotMatch"))),this.state.loading&&g.a.createElement(v.a,null),g.a.createElement("div",{className:"mt-50 mb-50"},g.a.createElement("div",{className:"text-center clipped-delivery-login-header"},g.a.createElement("img",{src:"/assets/img/logos/logo.png",alt:localStorage.getItem("storeName"),width:"120",className:"delivery-login-logo"}),g.a.createElement(y.a,{left:!0,duration:1e3},g.a.createElement("img",{src:"/assets/img/various/delivery-bike.svg",alt:this.props.title,className:"delivery-bike-img"}))),g.a.createElement("div",{className:"delivery-login-texts px-15 mt-50 pb-10 text-center"},g.a.createElement("span",{className:"delivery-login-title"},localStorage.getItem("loginLoginTitle")),g.a.createElement("br",null),g.a.createElement("span",{className:"delivery-login-subtitle"},localStorage.getItem("loginLoginSubTitle"))),g.a.createElement("div",{className:"height-70 delivery-dark-bg"},g.a.createElement("form",{onSubmit:this.handleLogin},g.a.createElement("div",{className:"form-group px-15 pt-30"},g.a.createElement("label",{className:"col-12 edit-address-input-label"},localStorage.getItem("loginLoginEmailLabel")),g.a.createElement("div",{className:"col-md-9 pb-5"},g.a.createElement("input",{type:"text",name:"email",onChange:this.handleInputEmail,className:"form-control delivery-login-input"})),g.a.createElement("label",{className:"col-12 edit-address-input-label"},localStorage.getItem("loginLoginPasswordLabel")),g.a.createElement("div",{className:"col-md-9"},g.a.createElement("input",{type:"password",name:"password",onChange:this.handleInputPassword,className:"form-control delivery-login-input"}))),g.a.createElement("div",{className:"mt-20 px-30 button-block"},g.a.createElement("button",{type:"submit",className:"btn delivery-login-button",style:{backgroundColor:localStorage.getItem("storeColor")}},localStorage.getItem("loginLoginTitle")))),this.props.languages&&this.props.languages.length>1&&g.a.createElement("div",{className:"mt-100 d-flex align-items-center justify-content-center"},g.a.createElement("div",{className:"mr-2 edit-address-input-label"},localStorage.getItem("changeLanguageText")),g.a.createElement("select",{onChange:this.handleOnChange,defaultValue:localStorage.getItem("userPreferedLanguage")?localStorage.getItem("userPreferedLanguage"):this.props.languages.filter(function(e){return 1===e.is_default})[0].id,className:"form-control delivery-language-select"},this.props.languages.map(function(e){return g.a.createElement("option",{value:e.id,key:e.id},e.language_name)}))))))}}]),t}(s.Component);b.contextTypes={router:function(){return null}};t.default=Object(d.b)(function(e){return{delivery_user:e.delivery_user.delivery_user,languages:e.languages.languages,language:e.languages.language}},{loginDeliveryUser:p.a,getSettings:m.a,getAllLanguages:f.a,getSingleLanguageData:f.b})(b)}}]);
//# sourceMappingURL=29.735d669a.chunk.js.map