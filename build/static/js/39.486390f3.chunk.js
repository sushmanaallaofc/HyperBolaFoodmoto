(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{319:function(e,t,r){var a;!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var o=typeof a;if("string"===o||"number"===o)e.push(a);else if(Array.isArray(a)&&a.length){var i=n.apply(null,a);i&&e.push(i)}else if("object"===o)for(var l in a)r.call(a,l)&&a[l]&&e.push(l)}}return e.join(" ")}"undefined"!==typeof e&&e.exports?(n.default=n,e.exports=n):void 0===(a=function(){return n}.apply(t,[]))||(e.exports=a)}()},357:function(e,t,r){"use strict";r.d(t,"c",function(){return s}),r.d(t,"a",function(){return c}),r.d(t,"b",function(){return u});var a=r(79),n=r(15),o=r(9),i=r(8),l=r.n(i),s=function(e){return function(t){return l.a.get(o.S+"/"+e).then(function(e){var r=e.data.restaurant,o=e.data.reviews;return[t({type:n.d,payload:r}),t({type:a.c,payload:o})]}).catch(function(e){console.log(e)})}},c=function(e){return function(t){return l.a.post(o.b,{order_id:e.order_id,token:e.auth_token,rating_store:e.rating_store,rating_delivery:e.rating_delivery,review_store:e.review_store,review_delivery:e.review_delivery}).then(function(e){var r=e.data;return t({type:a.a,payload:r})}).catch(function(e){console.log(e)})}},u=function(e,t){return function(r){l.a.post(o.L,{order_id:e,token:t}).then(function(e){var t=e.data;return r({type:a.b,payload:t})}).catch(function(e){console.log(e)})}}},436:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=r(0),o=s(n),i=s(r(2)),l=s(r(319));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.state={value:e.value},r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.Component),a(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.value;null!=t&&t!==this.state.value&&this.setState({value:t})}},{key:"onChange",value:function(e){var t=this.props,r=t.editing,a=t.value;r&&null==a&&this.setState({value:e})}},{key:"onStarClick",value:function(e,t,r,a){a.stopPropagation();var n=this.props,o=n.onStarClick;n.editing&&o&&o(e,t,r,a)}},{key:"onStarHover",value:function(e,t,r,a){a.stopPropagation();var n=this.props,o=n.onStarHover;n.editing&&o&&o(e,t,r,a)}},{key:"onStarHoverOut",value:function(e,t,r,a){a.stopPropagation();var n=this.props,o=n.onStarHoverOut;n.editing&&o&&o(e,t,r,a)}},{key:"renderStars",value:function(){for(var e=this,t=this.props,r=t.name,a=t.starCount,n=t.starColor,i=t.emptyStarColor,l=t.editing,s=this.state.value,c=function(e,t){return{float:"right",cursor:l?"pointer":"default",color:t>=e?n:i}},u={display:"none",position:"absolute",marginLeft:-9999},d=[],m=function(t){var a=r+"_"+t,n=o.default.createElement("input",{key:"input_"+a,style:u,className:"dv-star-rating-input",type:"radio",name:r,id:a,value:t,checked:s===t,onChange:e.onChange.bind(e,t,r)}),i=o.default.createElement("label",{key:"label_"+a,style:c(t,s),className:"dv-star-rating-star "+(s>=t?"dv-star-rating-full-star":"dv-star-rating-empty-star"),htmlFor:a,onClick:function(a){return e.onStarClick(t,s,r,a)},onMouseOver:function(a){return e.onStarHover(t,s,r,a)},onMouseLeave:function(a){return e.onStarHoverOut(t,s,r,a)}},e.renderIcon(t,s,r,a));d.push(n),d.push(i)},p=a;p>0;p--)m(p);return d.length?d:null}},{key:"renderIcon",value:function(e,t,r,a){var n=this.props,i=n.renderStarIcon,l=n.renderStarIconHalf;return"function"===typeof l&&Math.ceil(t)===e&&t%1!==0?l(e,t,r,a):"function"===typeof i?i(e,t,r,a):o.default.createElement("i",{key:"icon_"+a,style:{fontStyle:"normal"}},"\u2605")}},{key:"render",value:function(){var e=this.props,t=e.editing,r=e.className,a=(0,l.default)("dv-star-rating",{"dv-star-rating-non-editable":!t},r);return o.default.createElement("div",{style:{display:"inline-block",position:"relative"},className:a},this.renderStars())}}]),t}();c.propTypes={name:i.default.string.isRequired,value:i.default.number,editing:i.default.bool,starCount:i.default.number,starColor:i.default.string,onStarClick:i.default.func,onStarHover:i.default.func,onStarHoverOut:i.default.func,renderStarIcon:i.default.func,renderStarIconHalf:i.default.func},c.defaultProps={starCount:5,editing:!0,starColor:"#ffb400",emptyStarColor:"#333"},t.default=c,e.exports=t.default},437:function(e,t,r){"use strict";function a(e,t){var r=t.left,a=t.right,n=t.up,o=t.down,i=t.top,l=t.bottom,s=t.big,u=t.mirror,m=t.opposite,p=(r?1:0)|(a?2:0)|(i||o?4:0)|(l||n?8:0)|(u?16:0)|(m?32:0)|(e?64:0)|(s?128:0);if(d.hasOwnProperty(p))return d[p];if(!u!=!(e&&m)){var g=[a,r,l,i,o,n];r=g[0],a=g[1],i=g[2],l=g[3],n=g[4],o=g[5]}var f=s?"2000px":"100%",v=r?"-"+f:a?f:"0",y=o||i?"-"+f:n||l?f:"0";return d[p]=(0,c.animation)("\n    "+(e?"to":"from")+" {opacity: 0;transform: translate3d("+v+", "+y+", 0) rotate3d(0, 0, 1, -120deg);}\n\t  "+(e?"from":"to")+" {opacity: 1;transform: none}\n  "),d[p]}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.defaults,t=e.children,r=(e.out,e.forever),n=e.timeout,o=e.duration,i=void 0===o?c.defaults.duration:o,s=e.delay,u=void 0===s?c.defaults.delay:s,d=e.count,m=void 0===d?c.defaults.count:d,p=function(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}(e,["children","out","forever","timeout","duration","delay","count"]),g={make:a,duration:void 0===n?i:n,delay:u,forever:r,count:m,style:{animationFillMode:"both"}};return(0,l.default)(p,g,g,t)}Object.defineProperty(t,"__esModule",{value:!0});var o,i=r(67),l=(o=i)&&o.__esModule?o:{default:o},s=r(2),c=r(58),u={out:s.bool,left:s.bool,right:s.bool,top:s.bool,bottom:s.bool,big:s.bool,mirror:s.bool,opposite:s.bool,duration:s.number,timeout:s.number,delay:s.number,count:s.number,forever:s.bool},d={};n.propTypes=u,t.default=n,e.exports=t.default},478:function(e,t,r){"use strict";r.r(t),r.d(t,"RateAndReview",function(){return k});var a=r(56),n=r(3),o=r(4),i=r(6),l=r(5),s=r(7),c=r(0),u=r.n(c),d=r(436),m=r.n(d),p=r(357),g=r(17),f=r(115),v=r(514),y=r(12),h=r(11),b=r.n(h),_=r(49),S=r(437),w=r.n(S),k=function(e){function t(){var e,r;Object(n.a)(this,t);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return(r=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).state={order_id:"",loading:!1,rating_store:0,rating_delivery:0,review_store:"",review_delivery:"",required_error:!1,completed:!1,rating_delivery_icon:"",rating_store_icon:""},r.onDeliveryRating=function(e,t,a){switch(r.setState({rating_delivery:e}),e){case 5:r.setState({rating_delivery_icon:"rating-5.png"});break;case 4:r.setState({rating_delivery_icon:"rating-4.png"});break;case 3:r.setState({rating_delivery_icon:"rating-3.png"});break;case 2:r.setState({rating_delivery_icon:"rating-2.png"});break;case 1:r.setState({rating_delivery_icon:"rating-1.png"})}},r.renderDeliveryReviewIcon=function(){return u.a.createElement(w.a,{bottom:!0},u.a.createElement("img",{src:"/assets/img/various/".concat(r.state.rating_delivery_icon),alt:"review",className:"img-fluid review-icon"}))},r.renderStoreReviewIcon=function(){return u.a.createElement(w.a,{bottom:!0},u.a.createElement("img",{src:"/assets/img/various/".concat(r.state.rating_store_icon),alt:"review",className:"img-fluid review-icon"}))},r.onStoreRating=function(e,t,a){switch(r.setState({rating_store:e}),e){case 5:r.setState({rating_store_icon:"rating-5.png"});break;case 4:r.setState({rating_store_icon:"rating-4.png"});break;case 3:r.setState({rating_store_icon:"rating-3.png"});break;case 2:r.setState({rating_store_icon:"rating-2.png"});break;case 1:r.setState({rating_store_icon:"rating-1.png"})}},r.feedbackComment=function(e){e.preventDefault(),r.setState(Object(a.a)({},e.target.name,e.target.value))},r.submitRating=function(){if(r.props.order){if(1===r.props.order.delivery_type&&(0===r.state.rating_delivery||0===r.state.rating_store))return void r.setState({required_error:!0});if(2===r.props.order.delivery_type&&0===r.state.rating_store)return void r.setState({required_error:!0})}r.setState({loading:!0}),r.props.addRating(r.state).then(function(e){e&&e.payload.success&&r.context.router.history.goBack()}),r.setState({restaurant_rating:0,delivery_rating:0,comment:""})},r}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setState({order_id:this.props.match.params.id}),this.props.user.success&&(this.setState({user_id:this.props.user.data.id,auth_token:this.props.user.data.auth_token}),this.props.getOrderDetails(this.props.match.params.id,this.props.user.data.auth_token))}},{key:"componentWillReceiveProps",value:function(e){this.props.order!==e.order&&(this.setState({loading:!1}),null!==e.order.rating&&this.context.router.history.push("/"))}},{key:"render",value:function(){var e=this.state,t=e.rating_store,r=e.rating_delivery;return console.log("Store "+t),console.log("Delivery"+r),"true"!==localStorage.getItem("hideDesktopView")&&window.innerWidth>768?u.a.createElement(v.a,{to:"/"}):null===localStorage.getItem("storeColor")?u.a.createElement(v.a,{to:"/"}):this.props.user.success?u.a.createElement(u.a.Fragment,null,u.a.createElement(_.a,{seotitle:localStorage.getItem("rarModRatingPageTitle"),seodescription:localStorage.getItem("seoMetaDescription"),ogtype:"website",ogtitle:localStorage.getItem("seoOgTitle"),ogdescription:localStorage.getItem("seoOgDescription"),ogurl:window.location.href,twittertitle:localStorage.getItem("seoTwitterTitle"),twitterdescription:localStorage.getItem("seoTwitterDescription")}),this.state.required_error&&u.a.createElement("div",{className:"auth-error mb-50"},u.a.createElement("div",{className:"error-shake"},localStorage.getItem("ratingsRequiredMessage"))),this.state.loading&&u.a.createElement(y.a,null),u.a.createElement("div",{className:"col-12 p-0 mb-5"},u.a.createElement(f.a,{boxshadow:!0,has_title:!0,title:localStorage.getItem("rarModRatingPageTitle"),disable_search:!0,goto_accounts_page:!0})),this.state.completed?u.a.createElement("div",{className:"d-flex justify-content-center pt-80"},u.a.createElement("img",{src:"/assets/img/order-placed.gif",alt:"Completed",className:"img-fluid w-50"})):u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"block-content block-content-full pt-80 px-15"},u.a.createElement("form",{className:"rating-form"},1===this.props.order.delivery_type&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"pt-30"},u.a.createElement("div",{className:"d-flex justify-content-between"},u.a.createElement("div",{className:"form-group mb-0"},u.a.createElement("label",{className:"col-12 text-muted"},localStorage.getItem("rarModDeliveryRatingTitle")),u.a.createElement("div",{className:"col-md-9 pb-5"},u.a.createElement(m.a,{name:"rating_delivery",starCount:5,value:r,onStarClick:this.onDeliveryRating}))),u.a.createElement("div",null,this.state.rating_delivery_icon&&this.renderDeliveryReviewIcon())),u.a.createElement("div",{className:"form-group mb-0"},u.a.createElement("label",{className:"col-12 text-muted"},localStorage.getItem("rarReviewBoxTitleDeliveryFeedback")),u.a.createElement("div",{className:"col-md-9 pb-5"},u.a.createElement("textarea",{placeholder:localStorage.getItem("rarReviewBoxTextPlaceHolderText"),value:this.state.review_delivery,onChange:this.feedbackComment,className:"feedback-textarea",name:"review_delivery"})))),u.a.createElement("hr",{className:"mt-20"})),u.a.createElement("div",{className:"pt-10"},u.a.createElement("div",{className:"d-flex justify-content-between"},u.a.createElement("div",{className:"form-group mb-0"},u.a.createElement("label",{className:"col-12 text-muted"},localStorage.getItem("rarModRestaurantRatingTitle")),u.a.createElement("div",{className:"col-md-9 pb-5"},u.a.createElement(m.a,{name:"rating_store",starCount:5,value:t,onStarClick:this.onStoreRating}))),u.a.createElement("div",null,this.state.rating_store_icon&&this.renderStoreReviewIcon())),u.a.createElement("div",{className:"form-group mb-0"},u.a.createElement("label",{className:"col-12 text-muted"},localStorage.getItem("rarReviewBoxTitleStoreFeedback")),u.a.createElement("div",{className:"col-md-9 pb-5"},u.a.createElement("textarea",{placeholder:localStorage.getItem("rarReviewBoxTextPlaceHolderText"),value:this.state.review_store,onChange:this.feedbackComment,className:"feedback-textarea",name:"review_store"})))),u.a.createElement("button",{className:"btn-fixed-bottom",style:{backgroundColor:localStorage.getItem("storeColor")},onClick:this.submitRating,type:"button"},localStorage.getItem("rarSubmitButtonText"),u.a.createElement(b.a,{duration:250})))),u.a.createElement("div",{className:"mb-100"}))):u.a.createElement(v.a,{to:"/login"})}}]),t}(c.Component);k.contextTypes={router:function(){return null}};t.default=Object(g.b)(function(e){return{user:e.user.user,order:e.rating.order}},{addRating:p.a,getOrderDetails:p.b})(k)}}]);
//# sourceMappingURL=39.486390f3.chunk.js.map