{"version":3,"sources":["components/helpers/formatPrice.js","services/coupon/actions.js","services/cart/actions.js","services/total/actions.js","components/helpers/calculateDistance.js","services/confirmCart/actions.js","services/checkout/actions.js","components/helpers/calculateDistanceGoogle.js","components/Mobile/Cart/BillDetails/index.js","components/Mobile/Cart/CartCheckoutBlock/index.js","components/Mobile/Cart/CartItems/index.js","components/Mobile/Cart/Coupon/index.js","components/Mobile/Cart/OrderComment/index.js","components/Mobile/Cart/RestaurantInfoCart/index.js","components/Mobile/UserBan/index.js","components/Mobile/Cart/NewCoupon/index.js","components/Mobile/Cart/CouponSuccess/index.js","components/Mobile/Modules/OrderScheduling/index.js","components/Mobile/Cart/ScheduledDelivery/index.js","components/Mobile/Cart/index.js"],"names":["__webpack_require__","d","__webpack_exports__","formatPrice","price","parseFloat","applyCoupon","userCoupons","removeCoupon","couponApplied","_actionTypes__WEBPACK_IMPORTED_MODULE_0__","_configs__WEBPACK_IMPORTED_MODULE_1__","axios__WEBPACK_IMPORTED_MODULE_2__","axios__WEBPACK_IMPORTED_MODULE_2___default","n","token","coupon","restaurant_id","subtotal","dispatch","Axios","post","APPLY_COUPON_URL","then","response","data","type","APPLY_COUPON","payload","COUPON_ERROR","catch","error","console","log","status","USER_COUPON_URL","usercoupons","USER_COUPONS","hideMessage","coupon_error","percentage_discount","appliedAmount","loadCart","addProduct","removeProduct","products","LOAD_CART","product","ADD_PRODUCT","REMOVE_PRODUCT","updateCart","_components_helpers_formatPrice__WEBPACK_IMPORTED_MODULE_1__","cartProducts","cartTotal","productQuantity","reduce","sum","p","totalPrice","addonTotal","selectedaddons","map","addonArray","quantity","UPDATE_CART","calculateDistance","lon1","lat1","lon2","lat2","toRad","x","Math","PI","dLat","dLon","a","sin","cos","atan2","sqrt","checkConfirmCart","checkCartItemsAvailability","CONFIRM_CART","items","CHECK_CART_ITEMS_AVAILABILITY_URL","placeOrder","_coupon_actionTypes__WEBPACK_IMPORTED_MODULE_2__","axios__WEBPACK_IMPORTED_MODULE_3__","axios__WEBPACK_IMPORTED_MODULE_3___default","_total_actions__WEBPACK_IMPORTED_MODULE_4__","user","order","location","order_comment","total","method","payment_token","delivery_type","partial_wallet","distance","pending_payment","tipAmount","cash_change_amount","orderScheduledDeliveryDate","orderScheduledDeliveryTime","deliveryMethod","getState","PLACE_ORDER_URL","auth_token","dis","schedule_date","localStorage","getItem","JSON","parse","schedule_slot","checkout","success","PLACE_ORDER","cart","removeItem","i","length","splice","_calculateDistance__WEBPACK_IMPORTED_MODULE_0__","calculateDistanceGoogle","google","fn","origins","lat","lng","destinations","travelMode","maps","TravelMode","DRIVING","DistanceMatrixService","getDistanceMatrix","rows","elements","value","toFixed","BillDetails","state","delivery_charges","store_surge_fee","tips","couponAppliedAmount","totalItemTax","calculateDynamicDeliveryCharge","restaurant_info","_this","props","distanceFromUserToRestaurant","base_delivery_distance","extraDistance","extraCharge","extra_delivery_distance","extra_delivery_charge","dynamicDeliveryCharge","base_delivery_charge","ceil","surgeDeliveryCharge","deliveryCharge","restaurantInfo","surge_settings","enable_surge_below_distance","below_distance","below_distance_delivery_charge_type","calculateDistanceSurgeCharge","setState","below_distance_delivery_charge","enable_surge_above_distance","above_distance","above_distance_delivery_charge_type","above_distance_delivery_charge","enable_surge_below_order","below_order_amount","below_order_delivery_charge_type","calculateSurgeCharge","below_order_delivery_charge","enable_surge_above_order","above_order_amount","above_order_delivery_charge_type","above_order_delivery_charge","concat","getStoreSurgeCalculation","surge_fee","enable_store_surge","store_surge_type","store_surge_rate","demand_surge_rate","getTotalAfterCalculation","_this$props","calc","code","discount_type","discount","max_discount","Promise","resolve","setItem","checkAndSetAppliedAmount","restaurant_charges","enable_item_tax","forEach","item","itemTotal","tax_percentage","itemTax","enable_item_addon_tax","addon","addonTax","totalAfterCalculation","elem","refs","innerHTML","this","free_delivery_subtotal","nextProps","_this2","delivery_charge_type","_this$props2","removeTip","_this$getTotalAfterCa","react_default","createElement","Fragment","className","alreadyRunningOrders","ref","onClick","Component","connect","CartCheckoutBlock","process_cart_loading","processCart","handleProcessCartLoading","handleItemsAvailability","isSomeInactive","arrItem","find","id","is_active","context","router","history","push","gotoNewAddressPage","gotoMyAddressPage","gotoLoginPage","style","height","default_address","marginTop","backgroundColor","color","position","ink_default","duration","address","house","marginBottom","borderBottom","is_operational","contextTypes","addresses","restaurant","CartItems","_getItemTotal","_generateKey","pre","newkey","Date","getTime","random","toString","substring","addProductQuantity","removeProductQuantity","is_veg","src","alt","width","name","index","key","addon_id","addon_name","fontSize","top","WebkitTextStroke","minWidth","Coupon","inputCoupon","couponFailed","couponFailedType","couponSubtotalMessage","handleInput","event","target","handleSubmit","preventDefault","message","description","OrderComment","comment","placeholder","onChange","RestaurantInfoCart","open","isHomeDelivery","handlePopup","setDeliveryType","userPreferredSelectionDelivery","userPreferredSelectionSelfPickup","setTimeout","window","reload","displaySliderForDeliveryType","filter","Slide_default","left","right","react_content_loader_es","speed","primaryColor","secondaryColor","y","rx","ry","Dialog","fullWidth","fullScreen","onClose","margin","PaperProps","borderRadius","UserBan","dangerouslySetInnerHTML","__html","NewCoupon","error_msg","showCoupons","CouponSuccess","handleCouponDialog","overflow","LottiePlayer_modern","loop","animationData","lottieJson","play","transform","OrderScheduling","timeStops","time","day","slotsArray","days","sortedArray","todayDate","selectedDate","slotsDays","selectedSlot","getCurrentDay","getCurrentWeek","currentDate","moment","weekStart","clone","startOf","weekEnd","endOf","nextWeek","add","format","date","arr","isSameOrAfter","parseInt","array1","some","availSlots","toLowerCase","daysAvailable","sort","b","slice","getSlots","timeSlots","slots","d1","split","d2","close","diff","slotsAvailable","floor","asHours","startTime","j","slot","setDay","scheduleDay","dateAndDay","stringify","tomorrow","schedule_data","toggleSchedulePopup","chooseOrderSlot","dateDetails","renderScheduleButton","orderDate","orderSlot","orderDateJson","orderSlotJson","removeSelectedSchedule","stopPropagation","renderDoneButton","bottom","zIndex","getFirstSlot","slotBasedOnCurrentTime","currentTime","schedule_slot_buffer","openTime","isSameOrBefore","getDay","Object","keys","_this3","maxWidth","borderTopLeftRadius","borderTopRightRadius","TabPanel","children","other","objectWithoutProperties","assign","role","hidden","aria-labelledby","Box","Typography","component","customTheme","createTheme","StyledChip","withStyles","theme","_root","root","defineProperty","breakpoints","up","spacing","Chip","ScheduledDelivery","fullInputDate","inputDate","inputTimeSlot","lastOrderTime","setInputDate","full_date","setInputTimeSlot","last_order_time","onTimeSlotSelected","handleChange","newValue","handleChangeIndex","undefined","scheduled_deliveries","alert","ThemeProvider","AppBar","Tabs","indicatorColor","textColor","variant","scrollButtons","aria-label","Tab","label","classes","headerButton","btn","lib_default","axis","onChangeIndex","timeSlotContainer","time_slots","aTime","title","bTime","isBefore","isAfter","clickable","selected","display","gridTemplateColumns","gridColumnGap","gridRowGap","Cart","loading","is_operational_loading","min_order_satisfied","is_all_items_available","process_distance_calc_loading","userBan","tips_percentage","tipsPercentageSetting","tipsAmountSetting","others","percentage","selectedTips","is_tips_show","showSuccess","show_schedule","activeTab","showCheckbox","slotSelected","handleDeliveryMethod","handleTimeSlotSelected","fetchCheckBanAgain","checkBan","cartOperationalSteps","document","getElementsByTagName","classList","checkForItemsAvailability","checkUserRunningOrder","updateUserInfo","updatedUser","userSetAddress","latitude","longitude","tag","city","initRestaurantInfoApi","warn","getRestaurantInfoById","__doesRestaurantOperatesAtThisLocation","productAlreadyInCart","cp","findIndex","_this$props3","self","assertThisInitialized","__processRestaurantOperationalState","getRestaurantInfoAndOperationalStatus","__isRestaurantActive","__checkMinOrderSatisfied","min_order_price","_this$props4","showOtherText","addTip","addTipInPercentage","calculatedValue","restrictAlphabates","e","_e$target","min","max","Number","test","_this$setState","_this$setState2","getTotalItemsInCart","running_order","force_reload","remove","confirmCart","Mobile_UserBan","innerWidth","Redirect","to","deliveryComponents","_this$props5","has_scheduled_delivery","schedule_type","Cart_ScheduledDelivery","scheduleType","meta","seotitle","seodescription","ogtype","ogtitle","ogdescription","ogurl","href","twittertitle","twitterdescription","BackWithSearch","boxshadow","has_title","disable_search","homeButton","totalCartItem","hasStore","eta","delivery_time","paddingTop","Cart_RestaurantInfoCart","is_schedulable","accept_scheduled_orders","Modules_OrderScheduling","Cart_CartItems","Cart_OrderComment","htmlFor","flatAmount","onKeyPress","tipPercentage","percentageValue","Cart_CouponSuccess","Cart_NewCoupon","delayLink","delay","Cart_BillDetails","Cart_CartCheckoutBlock","cart_page","route","pathname","Swing_default","Footer","active_cart","GoogleApiWrapper","apiKey","LoadingContainer","Loading","helper"],"mappings":"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","file":"static/js/17.3dcd66bc.chunk.js","sourcesContent":["export const formatPrice = price => {\r\n    if (price) {\r\n        let formatedPrice = parseFloat(price);\r\n        // formatedPrice = formatedPrice.toFixed(2);\r\n        return formatedPrice;\r\n    }\r\n    return 0;\r\n};\r\n","import { USER_COUPONS, APPLY_COUPON, COUPON_ERROR } from \"./actionTypes\";\r\nimport { APPLY_COUPON_URL } from \"../../configs\";\r\nimport { USER_COUPON_URL } from \"../../configs\";\r\nimport Axios from \"axios\";\r\n\r\nexport const applyCoupon = (token, coupon, restaurant_id, subtotal) => (dispatch) => {\r\n\treturn Axios.post(APPLY_COUPON_URL, {\r\n\t\ttoken: token,\r\n\t\tcoupon: coupon,\r\n\t\trestaurant_id: restaurant_id,\r\n\t\tsubtotal: subtotal,\r\n\t})\r\n\t\t.then((response) => {\r\n\t\t\tconst coupon = response.data;\r\n\r\n\t\t\treturn [dispatch({ type: APPLY_COUPON, payload: coupon }), dispatch({ type: COUPON_ERROR, payload: null })];\r\n\t\t})\r\n\t\t.catch(function(error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\tif (error.response.status === 401) {\r\n\t\t\t\treturn dispatch({ type: COUPON_ERROR, payload: \"NOTLOGGEDIN\" });\r\n\t\t\t}\r\n\t\t});\r\n};\r\n\r\nexport const userCoupons = (token, restaurant_id) => (dispatch) => {\r\n\tAxios.post(USER_COUPON_URL, {\r\n\t\ttoken: token,\r\n\t\trestaurant_id: restaurant_id,\r\n\t})\r\n\t.then((response) => {\r\n\t\tconst usercoupons = response.data;\r\n\t\treturn dispatch({ type: USER_COUPONS, payload: usercoupons });\r\n\t})\r\n\t.catch(function(error) {\r\n\t\tconsole.log(error);\r\n\t});\r\n};\r\n\r\nexport const removeCoupon = () => (dispatch) => {\r\n\tconsole.log(\"Triggred Coupon Removed\");\r\n\r\n\tconst coupon = { hideMessage: true, coupon_error: \"\" };\r\n\treturn dispatch({ type: APPLY_COUPON, payload: coupon });\r\n};\r\n\r\nexport const couponApplied = (coupon, percentage_discount) => (dispatch) => {\r\n\tcoupon.appliedAmount = percentage_discount;\r\n\treturn dispatch({ type: APPLY_COUPON, payload: coupon });\r\n};\r\n","import { LOAD_CART, ADD_PRODUCT, REMOVE_PRODUCT } from \"./actionTypes\";\r\n\r\nexport const loadCart = (products) => ({\r\n\ttype: LOAD_CART,\r\n\tpayload: products,\r\n});\r\n\r\nexport const addProduct = (product) => ({\r\n\ttype: ADD_PRODUCT,\r\n\tpayload: product,\r\n});\r\n\r\nexport const removeProduct = (product) => (dispatch) => {\r\n\treturn dispatch({ type: REMOVE_PRODUCT, payload: product });\r\n};\r\n","import { UPDATE_CART } from \"./actionTypes\";\r\nimport { formatPrice } from \"../../components/helpers/formatPrice\";\r\n\r\nexport const updateCart = cartProducts => dispatch => {\r\n\tlet productQuantity = cartProducts.reduce((sum, p) => {\r\n\t\t// sum += p.quantity;\r\n\t\tsum++;\r\n\t\treturn sum;\r\n\t}, 0);\r\n\r\n\tlet totalPrice = cartProducts.reduce((sum, p) => {\r\n\t\tlet addonTotal = 0;\r\n\t\tif (p.selectedaddons) {\r\n\t\t\tp.selectedaddons.map(addonArray => {\r\n\t\t\t\taddonTotal += parseFloat(addonArray.price);\r\n\t\t\t\treturn addonTotal;\r\n\t\t\t});\r\n\t\t}\r\n\t\tsum += p.price * p.quantity + addonTotal * p.quantity;\r\n\t\tsum = parseFloat(sum);\r\n\t\tformatPrice(sum);\r\n\t\treturn sum;\r\n\t}, 0);\r\n\r\n\tlet cartTotal = {\r\n\t\tproductQuantity,\r\n\t\ttotalPrice\r\n\t};\r\n\r\n\tdispatch({\r\n\t\ttype: UPDATE_CART,\r\n\t\tpayload: cartTotal\r\n\t});\r\n};\r\n","export const calculateDistance = (lon1, lat1, lon2, lat2) => {\r\n    function toRad(x) {\r\n        return (x * Math.PI) / 180;\r\n    }\r\n\r\n    let R = 6371; // km\r\n\r\n    let x1 = lat2 - lat1;\r\n    let dLat = toRad(x1);\r\n    let x2 = lon2 - lon1;\r\n    let dLon = toRad(x2);\r\n    let a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\r\n    let c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n    let distance = R * c;\r\n    return distance;\r\n};\r\n","import { CONFIRM_CART } from \"./actionTypes\";\r\nimport { CHECK_CART_ITEMS_AVAILABILITY_URL } from \"../../configs\";\r\nimport Axios from \"axios\";\r\n\r\nexport const checkConfirmCart = () => dispatch => {\r\n\tconst confirmCart = true;\r\n\treturn dispatch({ type: CONFIRM_CART, payload: confirmCart });\r\n};\r\n\r\nexport const checkCartItemsAvailability = items => dispatch => {\r\n\treturn Axios.post(CHECK_CART_ITEMS_AVAILABILITY_URL, {\r\n\t\titems: items\r\n\t})\r\n\t\t.then(response => {\r\n\t\t\tconst data = response.data;\r\n\t\t\t// console.log(data);\r\n\t\t\treturn data;\r\n\t\t\t// return dispatch({ type: APPLY_COUPON, payload: coupon });\r\n\t\t})\r\n\t\t.catch(function(error) {\r\n\t\t\tconsole.log(error);\r\n\t\t});\r\n};\r\n","import { PLACE_ORDER } from \"./actionTypes\";\r\nimport { PLACE_ORDER_URL } from \"../../configs\";\r\nimport { APPLY_COUPON } from \"../coupon/actionTypes\";\r\n\r\nimport Axios from \"axios\";\r\nimport { updateCart } from \"../total/actions\";\r\n\r\nexport const placeOrder = (\r\n\tuser,\r\n\torder,\r\n\tcoupon,\r\n\tlocation,\r\n\torder_comment,\r\n\ttotal,\r\n\tmethod,\r\n\tpayment_token,\r\n\tdelivery_type,\r\n\tpartial_wallet,\r\n\tdistance,\r\n\tpending_payment,\r\n\ttipAmount,\r\n\tcash_change_amount,\r\n\torderScheduledDeliveryDate,\r\n\torderScheduledDeliveryTime,\r\n\tdeliveryMethod\r\n) => (dispatch, getState) => {\r\n\treturn Axios.post(PLACE_ORDER_URL, {\r\n\t\ttoken: user.data.auth_token,\r\n\t\tuser: user,\r\n\t\torder: order,\r\n\t\tcoupon: coupon,\r\n\t\tlocation: location,\r\n\t\torder_comment: order_comment,\r\n\t\ttotal: total,\r\n\t\tmethod: method,\r\n\t\tpayment_token: payment_token,\r\n\t\tdelivery_type: delivery_type,\r\n\t\tpartial_wallet: partial_wallet,\r\n\t\tdis: distance,\r\n\t\tpending_payment: pending_payment,\r\n\t\ttipAmount: tipAmount,\r\n\t\tcash_change_amount: cash_change_amount,\r\n\t\tschedule_date:\r\n\t\t\tlocalStorage.getItem(\"orderDate\") !== null ? JSON.parse(localStorage.getItem(\"orderDate\")) : null,\r\n\t\tschedule_slot:\r\n\t\t\tlocalStorage.getItem(\"orderSlot\") !== null ? JSON.parse(localStorage.getItem(\"orderSlot\")) : null,\r\n\t\torderScheduledDeliveryDate: orderScheduledDeliveryDate,\r\n\t\torderScheduledDeliveryTime: orderScheduledDeliveryTime,\r\n\t\tdeliveryMethod: deliveryMethod,\r\n\t})\r\n\t\t.then((response) => {\r\n\t\t\tconst checkout = response.data;\r\n\t\t\tconsole.log(\"From Checkout\");\r\n\t\t\tif (checkout.success) {\r\n\t\t\t\tdispatch({ type: PLACE_ORDER, payload: checkout });\r\n\r\n\t\t\t\tconst state = getState();\r\n\t\t\t\t// console.log(state);\r\n\t\t\t\tconst cartProducts = state.cart.products;\r\n\t\t\t\t// const user = state.user.user;\r\n\t\t\t\tlocalStorage.removeItem(\"orderComment\");\r\n\t\t\t\tlocalStorage.removeItem(\"orderSlot\");\r\n\t\t\t\tlocalStorage.removeItem(\"orderDate\");\r\n\t\t\t\tlocalStorage.removeItem(\"deliveryMethod\");\r\n\t\t\t\tlocalStorage.removeItem(\"orderScheduledDeliveryDate\");\r\n\t\t\t\tlocalStorage.removeItem(\"orderScheduledDeliveryTimeSlot\");\r\n\t\t\t\tfor (let i = cartProducts.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t// remove all items from cart\r\n\t\t\t\t\tcartProducts.splice(i, 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdispatch(updateCart(cartProducts));\r\n\r\n\t\t\t\tlocalStorage.removeItem(\"appliedCoupon\");\r\n\t\t\t\tlocalStorage.removeItem(\"couponAppliedAmount\");\r\n\t\t\t\tconst coupon = [];\r\n\t\t\t\tdispatch({ type: APPLY_COUPON, payload: coupon });\r\n\t\t\t} else {\r\n\t\t\t\treturn checkout;\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(function(error) {\r\n\t\t\treturn error.response;\r\n\t\t});\r\n};\r\n","import { calculateDistance } from \"./calculateDistance\";\r\n\r\nconst calculateDistanceGoogle = (lon1, lat1, lon2, lat2, google, fn) => {\r\n\tconst origins = [{ lat: parseFloat(lat1), lng: parseFloat(lon1) }];\r\n\tconst destinations = [{ lat: parseFloat(lat2), lng: parseFloat(lon2) }];\r\n\tconst travelMode = google.maps.TravelMode.DRIVING;\r\n\tconst service = new google.maps.DistanceMatrixService();\r\n\tservice.getDistanceMatrix(\r\n\t\t{\r\n\t\t\torigins: origins,\r\n\t\t\tdestinations: destinations,\r\n\t\t\ttravelMode: travelMode,\r\n\t\t},\r\n\t\t(response, status) => {\r\n\t\t\tconsole.log(\"RESPONSE\", response);\r\n\t\t\tconsole.log(\"STATUS\", response.rows[0].elements[0].status);\r\n\r\n\t\t\tif (response.rows[0].elements[0].status === \"OK\") {\r\n\t\t\t\tlet distance = (response.rows[0].elements[0].distance.value / 1000).toFixed(1);\r\n\t\t\t\tfn(distance);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(\"Falling back to basic distance calculation\");\r\n\t\t\t\tlet distance = calculateDistance(lon1, lat1, lon2, lat2);\r\n\t\t\t\tfn(distance);\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n};\r\n\r\nexport default calculateDistanceGoogle;\r\n","import React, { Component } from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { formatPrice } from \"../../../helpers/formatPrice\";\r\nimport { couponApplied } from \"../../../../services/coupon/actions\";\r\n\r\nclass BillDetails extends Component {\r\n\tstate = {\r\n\t\tdelivery_charges: 0,\r\n\t\tstore_surge_fee: 0,\r\n\t\tdistance: 0,\r\n\t\ttips: 0,\r\n\t\tcouponAppliedAmount: 0,\r\n\t\ttotalItemTax: 0,\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (localStorage.getItem(\"userSelected\") === \"SELFPICKUP\") {\r\n\t\t\tthis.setState({ delivery_charges: 0 });\r\n\t\t} else {\r\n\t\t\tif (parseFloat(this.props.restaurant_info.free_delivery_subtotal) > 0) {\r\n\t\t\t\tif (parseFloat(this.props.total) >= parseFloat(this.props.restaurant_info.free_delivery_subtotal)) {\r\n\t\t\t\t\tconsole.log(\"Free Delivery \");\r\n\t\t\t\t\tthis.setState({ delivery_charges: 0 });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.surgeDeliveryCharge(this.props.total, this.props.restaurant_info.delivery_charges);\r\n\t\t\t\t\t// this.setState({ delivery_charges: this.props.restaurant_info.delivery_charges });\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.surgeDeliveryCharge(this.props.total, this.props.restaurant_info.delivery_charges);\r\n\t\t\t\t// this.setState({ delivery_charges: this.props.restaurant_info.delivery_charges });\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({ store_surge_fee: this.getStoreSurgeCalculation(this.props) });\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (localStorage.getItem(\"userSelected\") === \"DELIVERY\") {\r\n\t\t\tif (this.props.restaurant_info.delivery_charges !== nextProps.restaurant_info.delivery_charges) {\r\n\t\t\t\tthis.surgeDeliveryCharge(nextProps.total, nextProps.restaurant_info.delivery_charges);\r\n\t\t\t\t// this.setState({ delivery_charges: nextProps.restaurant_info.delivery_charges });\r\n\t\t\t}\r\n\r\n\t\t\tif (this.props.total !== nextProps.total) {\r\n\t\t\t\tif (nextProps.restaurant_info.delivery_charge_type !== \"DYNAMIC\") {\r\n\t\t\t\t\tif (parseFloat(nextProps.restaurant_info.free_delivery_subtotal) > 0) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tparseFloat(nextProps.total) >= parseFloat(nextProps.restaurant_info.free_delivery_subtotal)\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tconsole.log(\"Free Delivery \");\r\n\t\t\t\t\t\t\tthis.setState({ delivery_charges: 0 });\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.surgeDeliveryCharge(nextProps.total, nextProps.restaurant_info.delivery_charges);\r\n\t\t\t\t\t\t\t// this.setState({ delivery_charges: nextProps.restaurant_info.delivery_charges });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.surgeDeliveryCharge(nextProps.total, nextProps.restaurant_info.delivery_charges);\r\n\t\t\t\t\t\t// this.setState({ delivery_charges: nextProps.restaurant_info.delivery_charges });\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({ store_surge_fee: this.getStoreSurgeCalculation(this.props) });\r\n\r\n\t\t// if (nextProps.distance) {\r\n\t\tif (localStorage.getItem(\"userSelected\") === \"DELIVERY\") {\r\n\t\t\tif (nextProps.restaurant_info.delivery_charge_type === \"DYNAMIC\") {\r\n\t\t\t\tthis.setState({ distance: nextProps.distance }, () => {\r\n\t\t\t\t\tif (parseFloat(nextProps.restaurant_info.free_delivery_subtotal) > 0) {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tparseFloat(nextProps.total) >= parseFloat(nextProps.restaurant_info.free_delivery_subtotal)\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tconsole.log(\"Free Delivery \");\r\n\t\t\t\t\t\t\tthis.setState({ delivery_charges: 0 });\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//check if restaurant has dynamic delivery charge..\r\n\t\t\t\t\t\t\tthis.calculateDynamicDeliveryCharge(nextProps.total);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//check if restaurant has dynamic delivery charge..\r\n\t\t\t\t\t\tthis.calculateDynamicDeliveryCharge(nextProps.total);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({ distance: nextProps.distance });\r\n\t\t\t}\r\n\t\t}\r\n\t\t// }\r\n\t}\r\n\r\n\tcalculateDynamicDeliveryCharge = (total) => {\r\n\t\tconst { restaurant_info } = this.props;\r\n\r\n\t\tconst distanceFromUserToRestaurant = this.state.distance;\r\n\t\tconsole.log(\"Distance from user to restaurant 2: \" + distanceFromUserToRestaurant + \" km\");\r\n\t\tif (parseFloat(distanceFromUserToRestaurant) > parseFloat(restaurant_info.base_delivery_distance)) {\r\n\t\t\tconst extraDistance = parseFloat(distanceFromUserToRestaurant) -  parseFloat(restaurant_info.base_delivery_distance);\r\n\t\t\tconsole.log(\"Extra Distance: \" + extraDistance + \" km\");\r\n\r\n\t\t\tconst extraCharge =\r\n\t\t\t\t(extraDistance / restaurant_info.extra_delivery_distance) * restaurant_info.extra_delivery_charge;\r\n\t\t\tconsole.log(\"Extra Charge: \" + extraCharge);\r\n\r\n\t\t\tlet dynamicDeliveryCharge = parseFloat(restaurant_info.base_delivery_charge) + parseFloat(extraCharge);\r\n\t\t\tconsole.log(\"Total Charge: \" + dynamicDeliveryCharge);\r\n\t\t\tif (localStorage.getItem(\"enDelChrRnd\") === \"true\") {\r\n\t\t\t\tdynamicDeliveryCharge = Math.ceil(dynamicDeliveryCharge);\r\n\t\t\t}\r\n\t\t\t// console.log('ramesh1', dynamicDeliveryCharge);\r\n\t\t\tthis.surgeDeliveryCharge(total, dynamicDeliveryCharge);\r\n\t\t\t// this.setState({ delivery_charges: dynamicDeliveryCharge });\r\n\t\t} else {\r\n\t\t\t// this.setState({ delivery_charges: restaurant_info.base_delivery_charge });\r\n\t\t\tthis.surgeDeliveryCharge(total, restaurant_info.base_delivery_charge);\r\n\t\t}\r\n\t};\r\n\r\n\tsurgeDeliveryCharge = (total, deliveryCharge) =>{\r\n\t\tconst restaurantInfo = this.props.restaurant_info;\r\n\t\tif (restaurantInfo && restaurantInfo.surge_settings) {\r\n\t\t\tconst { surge_settings } = this.props.restaurant_info;\r\n\t\t\tconst distanceFromUserToRestaurant = this.state.distance;\r\n\t\t\t// //distance based surge_settings\r\n\t\t\tif (surge_settings.enable_surge_below_distance && parseFloat(distanceFromUserToRestaurant) <= parseFloat(surge_settings.below_distance)) {\r\n\t\t\t\t// if the delivery charge type is DYNAMIC, calculate dynamic charge\r\n\t\t\t\tif (surge_settings.below_distance_delivery_charge_type === 'DYNAMIC') {\r\n\t\t\t\t\tthis.calculateDistanceSurgeCharge('below', surge_settings);\r\n\t\t\t\t} \r\n\t\t\t\t// if the delivery charge type is FIXED, set the fixed surge delivery charge\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.setState({ delivery_charges: surge_settings.below_distance_delivery_charge });\r\n\t\t\t\t}\r\n\t\t\t} else if (surge_settings.enable_surge_above_distance && parseFloat(distanceFromUserToRestaurant) > parseFloat(surge_settings.above_distance)) {\r\n\t\t\t\t// if the delivery charge type is DYNAMIC, calculate dynamic charge\r\n\t\t\t\tif (surge_settings.above_distance_delivery_charge_type === 'DYNAMIC') {\r\n\t\t\t\t\tthis.calculateDistanceSurgeCharge('above', surge_settings);\r\n\t\t\t\t} \r\n\t\t\t\t// if the delivery charge type is FIXED, set the fixed surge delivery charge\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.setState({ delivery_charges: surge_settings.above_distance_delivery_charge });\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// total based surge_settings\r\n\t\t\t\t// if order total is below the specified amount and surge pricing is enabled for this case\r\n\t\t\t\tif (surge_settings.enable_surge_below_order && parseFloat(total) <= parseFloat(surge_settings.below_order_amount)) {\r\n\t\t\t\t\t// if the delivery charge type is DYNAMIC, calculate dynamic charge\r\n\t\t\t\t\tif (surge_settings.below_order_delivery_charge_type === 'DYNAMIC') {\r\n\t\t\t\t\t\tthis.calculateSurgeCharge('below', surge_settings);\r\n\t\t\t\t\t} \r\n\t\t\t\t\t// if the delivery charge type is FIXED, set the fixed surge delivery charge\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.setState({ delivery_charges: surge_settings.below_order_delivery_charge });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// if order total is above the specified amount and surge pricing is enabled for this case\r\n\t\t\t\telse if (surge_settings.enable_surge_above_order && parseFloat(total) > parseFloat(surge_settings.above_order_amount)) {\r\n\t\t\t\t\t// if the delivery charge type is DYNAMIC, calculate dynamic charge\r\n\t\t\t\t\tif (surge_settings.above_order_delivery_charge_type === 'DYNAMIC') {\r\n\t\t\t\t\t\tthis.calculateSurgeCharge('above', surge_settings);\r\n\t\t\t\t\t} \r\n\t\t\t\t\t// if the delivery charge type is FIXED, set the fixed surge delivery charge\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.setState({ delivery_charges: surge_settings.above_order_delivery_charge });\r\n\t\t\t\t\t}\r\n\t\t\t\t} \r\n\t\t\t\t// if none of the surge pricing conditions apply, set the regular delivery charge\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.setState({ delivery_charges: deliveryCharge });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.setState({ delivery_charges: deliveryCharge });\r\n\t\t}\r\n\t};\r\n\r\n\tcalculateSurgeCharge = (type, surge_settings) => {\r\n\t\tconst distanceFromUserToRestaurant = this.state.distance;\r\n\t\r\n\t\tconst base_delivery_distance = surge_settings[`${type}_order_base_delivery_distance`];\r\n\t\tconst base_delivery_charge = surge_settings[`${type}_order_base_delivery_charge`];\r\n\t\tconst extra_delivery_distance = surge_settings[`${type}_order_extra_delivery_distance`];\r\n\t\tconst extra_delivery_charge = surge_settings[`${type}_order_extra_delivery_charge`];\r\n\t\r\n\t\tif (distanceFromUserToRestaurant > base_delivery_distance) {\r\n\t\t\tconst extraDistance = distanceFromUserToRestaurant - base_delivery_distance;\r\n\t\r\n\t\t\tconst extraCharge = (extraDistance / extra_delivery_distance) * extra_delivery_charge;\r\n\t\r\n\t\t\tlet surgeDeliveryCharge = parseFloat(base_delivery_charge) + parseFloat(extraCharge);\r\n\t\t\t\r\n\t\t\tif (localStorage.getItem(\"enDelChrRnd\") === \"true\") {\r\n\t\t\t\tsurgeDeliveryCharge = Math.ceil(surgeDeliveryCharge);\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.setState({ delivery_charges: surgeDeliveryCharge });\r\n\t\t} else {\r\n\t\t\tthis.setState({ delivery_charges: base_delivery_charge });\r\n\t\t}\r\n\t};\r\n\r\n\tcalculateDistanceSurgeCharge = (type, surge_settings) => {\r\n\t\tconst distanceFromUserToRestaurant = this.state.distance;\r\n\t\r\n\t\tconst base_delivery_distance = surge_settings[`${type}_distance_base_delivery_distance`];\r\n\t\tconst base_delivery_charge = surge_settings[`${type}_distance_base_delivery_charge`];\r\n\t\tconst extra_delivery_distance = surge_settings[`${type}_distance_extra_delivery_distance`];\r\n\t\tconst extra_delivery_charge = surge_settings[`${type}_distance_extra_delivery_charge`];\r\n\t\r\n\t\tif (distanceFromUserToRestaurant > base_delivery_distance) {\r\n\t\t\tconst extraDistance = distanceFromUserToRestaurant - base_delivery_distance;\r\n\t\r\n\t\t\tconst extraCharge = (extraDistance / extra_delivery_distance) * extra_delivery_charge;\r\n\t\r\n\t\t\tlet surgeDeliveryCharge = parseFloat(base_delivery_charge) + parseFloat(extraCharge);\r\n\t\t\t\r\n\t\t\tif (localStorage.getItem(\"enDelChrRnd\") === \"true\") {\r\n\t\t\t\tsurgeDeliveryCharge = Math.ceil(surgeDeliveryCharge);\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.setState({ delivery_charges: surgeDeliveryCharge });\r\n\t\t} else {\r\n\t\t\tthis.setState({ delivery_charges: base_delivery_charge });\r\n\t\t}\r\n\t};\t\r\n\r\n\tgetStoreSurgeCalculation = (props) => {\r\n\t\tconst { total, restaurant_info } = props;\r\n\t\tlet surge_fee = 0;\r\n\t\r\n\t\tif (restaurant_info.enable_store_surge === 1) {\r\n\t\t\tlet store_surge_fee = (restaurant_info.store_surge_type === \"PERCENTAGE\") \r\n\t\t\t\t? (total * parseFloat(restaurant_info.store_surge_rate) / 100) \r\n\t\t\t\t: parseFloat(restaurant_info.store_surge_rate);\r\n\t\t\tsurge_fee += store_surge_fee;\r\n\t\t}\r\n\t\tif (restaurant_info.demand_surge_rate > 0) {\r\n\t\t\tlet demand_surge_fee = parseFloat(restaurant_info.demand_surge_rate);\r\n\t\t\tsurge_fee += demand_surge_fee;\r\n\t\t}\r\n\t\r\n\t\treturn formatPrice(surge_fee);\r\n\t};\r\n\t\r\n\r\n\t// Calculating total with/without coupon/tax\r\n\tgetTotalAfterCalculation = () => {\r\n\t\tconst { total, restaurant_info, coupon, tips, cartProducts } = this.props;\r\n\t\tlet calc = 0;\r\n\t\tlet totalItemTax = 0;\r\n\r\n\t\t// if (restaurant_info.enable_item_tax) {\r\n\t\t// \tcartProducts.forEach((item) => {\r\n\t\t// \t\tlet itemTotal = parseFloat(item.price) * item.quantity;\r\n\t\t// \t\tlet tax_percentage = item.tax_percentage;\r\n\r\n\t\t// \t\tif (tax_percentage === null || tax_percentage === 0) {\r\n\t\t// \t\t\ttax_percentage = restaurant_info.tax_percentage > 0 ? restaurant_info.tax_percentage : 0;\r\n\t\t// \t\t}\r\n\r\n\t\t// \t\tlet itemTax = (parseFloat(tax_percentage) / 100) * itemTotal;\r\n\t\t// \t\tcalc = formatPrice(parseFloat(calc) + itemTax);\r\n\t\t// \t\ttotalItemTax += itemTax;\r\n\r\n\t\t// \t\t// Calculate tax for addons\r\n\t\t// \t\tif (restaurant_info.enable_item_addon_tax) {\r\n\t\t// \t\t\tif (item.selectedaddons) {\r\n\t\t// \t\t\t\titem.selectedaddons.forEach((addon) => {\r\n\t\t// \t\t\t\t\tlet addonTotal = parseFloat(addon.price) * item.quantity;\r\n\t\t// \t\t\t\t\tlet addonTax = (parseFloat(tax_percentage) / 100) * addonTotal;\r\n\t\t// \t\t\t\t\tcalc = formatPrice(parseFloat(calc) + addonTax);\r\n\t\t// \t\t\t\t\ttotalItemTax += addonTax;\r\n\t\t// \t\t\t\t});\r\n\t\t// \t\t\t}\r\n\t\t// \t\t}\r\n\t\t// \t});\r\n\t\t// }\r\n\t\t\r\n\t\tif (coupon.code) {\r\n\t\t\tif (coupon.discount_type === \"PERCENTAGE\") {\r\n\t\t\t\tlet percentage_discount = formatPrice((coupon.discount / 100) * parseFloat(total));\r\n\t\t\t\tif (coupon.max_discount) {\r\n\t\t\t\t\tif (parseFloat(percentage_discount) >= coupon.max_discount) {\r\n\t\t\t\t\t\tpercentage_discount = coupon.max_discount;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.props.couponApplied(coupon, percentage_discount);\r\n\t\t\t\tconst saveCouponAppliedAmount = new Promise((resolve) => {\r\n\t\t\t\t\tlocalStorage.setItem(\"couponAppliedAmount\", percentage_discount);\r\n\t\t\t\t\tresolve(\"Saved\");\r\n\t\t\t\t});\r\n\t\t\t\tsaveCouponAppliedAmount.then(() => {\r\n\t\t\t\t\tthis.checkAndSetAppliedAmount();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tcalc = formatPrice(\r\n\t\t\t\t\tformatPrice(\r\n\t\t\t\t\t\tparseFloat(total) -\r\n\t\t\t\t\t\t\tpercentage_discount +\r\n\t\t\t\t\t\t\tparseFloat(restaurant_info.restaurant_charges || 0.0) +\r\n\t\t\t\t\t\t\tparseFloat(this.state.delivery_charges || 0.0) +\r\n\t\t\t\t\t\t\tparseFloat(this.state.store_surge_fee || 0.0)\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tcalc = formatPrice(\r\n\t\t\t\t\tparseFloat(total) -\r\n\t\t\t\t\t\t(parseFloat(coupon.discount) || 0.0) +\r\n\t\t\t\t\t\t((parseFloat(restaurant_info.restaurant_charges) || 0.0) +\r\n\t\t\t\t\t\t\t(parseFloat(this.state.delivery_charges) || 0.0) +\r\n\t\t\t\t\t\t\tparseFloat(this.state.store_surge_fee || 0.0))\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcalc = formatPrice(\r\n\t\t\t\tparseFloat(total) +\r\n\t\t\t\t\tparseFloat(restaurant_info.restaurant_charges || 0.0) +\r\n\t\t\t\t\tparseFloat(this.state.delivery_charges || 0.0) +\r\n\t\t\t\t\tparseFloat(this.state.store_surge_fee || 0.0)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (localStorage.getItem(\"taxApplicable\") === \"true\") {\r\n\t\t\tcalc = formatPrice(\r\n\t\t\t\tparseFloat(\r\n\t\t\t\t\tparseFloat(calc) + parseFloat(parseFloat(localStorage.getItem(\"taxPercentage\")) / 100) * calc\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (restaurant_info.enable_item_tax) {\r\n\t\t\tcartProducts.forEach((item) => {\r\n\t\t\t\tlet itemTotal = parseFloat(item.price) * item.quantity;\r\n\t\t\t\tlet tax_percentage = item.tax_percentage;\r\n\r\n\t\t\t\tif (tax_percentage === null || tax_percentage === 0) {\r\n\t\t\t\t\ttax_percentage = restaurant_info.tax_percentage > 0 ? restaurant_info.tax_percentage : 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet itemTax = (parseFloat(tax_percentage) / 100) * itemTotal;\r\n\t\t\t\tcalc = formatPrice(parseFloat(calc) + itemTax);\r\n\t\t\t\ttotalItemTax += itemTax;\r\n\r\n\t\t\t\t// Calculate tax for addons\r\n\t\t\t\tif (restaurant_info.enable_item_addon_tax) {\r\n\t\t\t\t\tif (item.selectedaddons) {\r\n\t\t\t\t\t\titem.selectedaddons.forEach((addon) => {\r\n\t\t\t\t\t\t\tlet addonTotal = parseFloat(addon.price) * item.quantity;\r\n\t\t\t\t\t\t\tlet addonTax = (parseFloat(tax_percentage) / 100) * addonTotal;\r\n\t\t\t\t\t\t\tcalc = formatPrice(parseFloat(calc) + addonTax);\r\n\t\t\t\t\t\t\ttotalItemTax += addonTax;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (tips.value > 0) {\r\n\t\t\tcalc = parseFloat(calc) + parseFloat(tips.value);\r\n\t\t}\r\n\r\n\t\tlet totalAfterCalculation = formatPrice(calc);\r\n  \t\treturn { totalAfterCalculation, totalItemTax };\r\n\r\n\t\t// return formatPrice(calc);\r\n\t};\r\n\r\n\tcheckAndSetAppliedAmount = () => {\r\n\t\tlet elem = \"\";\r\n\t\tif (localStorage.getItem(\"currencySymbolAlign\") === \"left\") {\r\n\t\t\telem = \"(\" + localStorage.getItem(\"currencyFormat\") + localStorage.getItem(\"couponAppliedAmount\") + \")\";\r\n\t\t} else {\r\n\t\t\telem = \"(\" + localStorage.getItem(\"couponAppliedAmount\") + localStorage.getItem(\"currencyFormat\") + \")\";\r\n\t\t}\r\n\r\n\t\tif (this.refs.appliedAmount) {\r\n\t\t\tthis.refs.appliedAmount.innerHTML = elem;\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { total, restaurant_info, coupon, tips, removeTip, cartProducts } = this.props;\r\n\t\tconst { totalAfterCalculation, totalItemTax } = this.getTotalAfterCalculation();\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div className=\"\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={`bg-white bill-details mb-200 ${!this.props.alreadyRunningOrders && \"pt-10\"}`}>\r\n\t\t\t\t\t\t<div className=\"p-15\">\r\n\t\t\t\t\t\t\t<h2 className=\"bill-detail-text m-0\">{localStorage.getItem(\"cartBillDetailsText\")}</h2>\r\n\t\t\t\t\t\t\t<div className=\"display-flex\">\r\n\t\t\t\t\t\t\t\t<div className=\"flex-auto\">{localStorage.getItem(\"cartItemTotalText\")}</div>\r\n\t\t\t\t\t\t\t\t<div className=\"flex-auto text-right\">\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t{formatPrice(total)}\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t{coupon.code && (\r\n\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t<div className=\"display-flex\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto coupon-text\">\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartCouponText\")}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto text-right coupon-text\">\r\n\t\t\t\t\t\t\t\t\t\t\t<span>-</span>\r\n\t\t\t\t\t\t\t\t\t\t\t{coupon.discount_type === \"PERCENTAGE\" ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{coupon.discount}%{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"coupon-appliedAmount\" ref=\"appliedAmount\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.checkAndSetAppliedAmount()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\") + coupon.discount}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcoupon.discount + localStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{restaurant_info.restaurant_charges === \"0.00\" ||\r\n\t\t\t\t\t\t\trestaurant_info.restaurant_charges === null ? null : (\r\n\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t<div className=\"display-flex\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto\">{localStorage.getItem(\"cartRestaurantCharges\")}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t{restaurant_info.restaurant_charges}\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{localStorage.getItem(\"userSelected\") !== \"SELFPICKUP\" && (\r\n\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t{this.state.delivery_charges === 0 ? (\r\n\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"display-flex\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto\">{localStorage.getItem(\"cartDeliveryCharges\")}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"display-flex\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartDeliveryCharges\")}{\" | \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"cart-delivery-distance\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{parseFloat(this.state.distance).toFixed(1)}km\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{this.props.restaurant_info.free_delivery_subtotal > 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.delivery_charges > 0 && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"freeDeliveryMessageBlock\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"freeDeliveryPrefixText\")}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<b>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"left\" && localStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{parseFloat(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.props.restaurant_info.free_delivery_subtotal\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) - parseFloat(this.props.total)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"right\" && localStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</b>{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"freeDeliverySuffixText\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formatPrice(this.state.delivery_charges)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{this.state.store_surge_fee > 0 && (\r\n\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t<div className=\"display-flex\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto\">{localStorage.getItem(\"storeSurgeCharges\")}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t{this.state.store_surge_fee}\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{localStorage.getItem(\"taxApplicable\") === \"true\" && (\r\n\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t<div className=\"display-flex\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto text-danger\">{localStorage.getItem(\"taxText\")}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto text-right text-danger\">\r\n\t\t\t\t\t\t\t\t\t\t\t<span>+</span>\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"taxPercentage\")}%\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{totalItemTax > 0 && (\r\n\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t<div className=\"display-flex\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"flex-auto text-danger\">{localStorage.getItem(\"taxText\")}</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"flex-auto text-right text-danger\">\r\n\t\t\t\t\t\t\t\t\t<span>+</span>\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" && localStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t{totalItemTax.toFixed(2)}\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" && localStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{tips.value !== 0 && (\r\n\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t<div className=\"display-flex\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto\">{localStorage.getItem(\"tipText\")}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-auto text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t{formatPrice(tips.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t\t\t<span onClick={removeTip}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<u>{localStorage.getItem(\"cartRemoveTipText\")}</u>\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t<div className=\"display-flex\">\r\n\t\t\t\t\t\t\t\t<div className=\"flex-auto font-w700\">{localStorage.getItem(\"cartToPayText\")}</div>\r\n\t\t\t\t\t\t\t\t<div className=\"flex-auto text-right font-w700\">\r\n\t\t\t\t\t\t\t\t\t{/* Calculating total after discount coupon or without discount coupon */}\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t{totalAfterCalculation.toFixed(2)}\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{localStorage.getItem(\"userSelected\") === \"SELFPICKUP\" && (\r\n\t\t\t\t\t\t\t\t<p className=\"my-2 mt-3 text-danger font-weight-bold\">\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"selectedSelfPickupMessage\")}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tcoupon: state.coupon.coupon,\r\n\trestaurant_info: state.items.restaurant_info,\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ couponApplied }\r\n)(BillDetails);\r\n","import React, { Component } from \"react\";\r\n\r\n// import DelayLink from \"../../../helpers/delayLink\";\r\nimport Ink from \"react-ink\";\r\n// import { Link } from \"react-router-dom\";\r\nimport { checkConfirmCart, checkCartItemsAvailability } from \"../../../../services/confirmCart/actions\";\r\nimport { connect } from \"react-redux\";\r\nimport { placeOrder } from \"../../../../services/checkout/actions\";\r\nimport { addProduct } from \"../../../../services/cart/actions\";\r\nimport { updateCart } from \"../../../../services/total/actions\";\r\n\r\nclass CartCheckoutBlock extends Component {\r\n\tstatic contextTypes = {\r\n\t\trouter: () => null,\r\n\t};\r\n\t// state = {\r\n\t//     loading: true,\r\n\t//     is_operational: true\r\n\t// };\r\n\r\n\tstate = {\r\n\t\tprocess_cart_loading: false,\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\t// this.props.checkForItemsAvailability();\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\t// const { checkout} = this.props;\r\n\t\tif (nextProps.checkout !== this.props.checkout) {\r\n\t\t\t//redirect to running order page\r\n\t\t\tthis.context.router.history.push(\"/running-order\");\r\n\t\t}\r\n\t\t// console.log(\"NEXT PROPS - \" + nextProps.is_operational);\r\n\t\t// if (nextProps.is_operational !== this.props.is_operational) {\r\n\t\t//     console.log(\"Came here -> FROM CHILD\");\r\n\t\t//     this.setState({ is_operational: false, loading: false });\r\n\t\t// }\r\n\t}\r\n\r\n\tprocessCart = () => {\r\n\t\tconst {\r\n\t\t\thandleProcessCartLoading,\r\n\t\t\tcheckCartItemsAvailability,\r\n\t\t\tcartProducts,\r\n\t\t\taddProduct,\r\n\t\t\tupdateCart,\r\n\t\t\tcheckConfirmCart,\r\n\t\t\thandleItemsAvailability,\r\n\t\t} = this.props;\r\n\r\n\t\thandleProcessCartLoading(true);\r\n\r\n\t\tcheckCartItemsAvailability(cartProducts).then((response) => {\r\n\t\t\thandleProcessCartLoading(false);\r\n\t\t\tthis.setState({ process_cart_loading: false });\r\n\r\n\t\t\tif (response && response.length) {\r\n\t\t\t\tlet isSomeInactive = false;\r\n\t\t\t\tresponse.map((arrItem) => {\r\n\t\t\t\t\t//find the item in the cart\r\n\t\t\t\t\tlet item = cartProducts.find((item) => item.id === arrItem.id);\r\n\t\t\t\t\t//get new price and is_active status and set it.\r\n\t\t\t\t\titem.is_active = arrItem.is_active;\r\n\t\t\t\t\titem.price = arrItem.price;\r\n\t\t\t\t\taddProduct(item);\r\n\r\n\t\t\t\t\tif (!isSomeInactive) {\r\n\t\t\t\t\t\tif (!arrItem.is_active) {\r\n\t\t\t\t\t\t\tisSomeInactive = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t});\r\n\t\t\t\tif (isSomeInactive) {\r\n\t\t\t\t\tupdateCart(this.props.cartProducts);\r\n\t\t\t\t\thandleItemsAvailability(false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tupdateCart(this.props.cartProducts);\r\n\t\t\t\t\tcheckConfirmCart();\r\n\t\t\t\t\tthis.context.router.history.push(\"/checkout\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tgotoNewAddressPage = () => {\r\n\t\tconst saveFromCart = new Promise((resolve) => {\r\n\t\t\tlocalStorage.setItem(\"fromCart\", 1);\r\n\t\t\tresolve(\"Saved\");\r\n\t\t});\r\n\t\tsaveFromCart.then(() => {\r\n\t\t\tthis.context.router.history.push(\"/search-location\");\r\n\t\t});\r\n\t};\r\n\r\n\tgotoMyAddressPage = () => {\r\n\t\tlocalStorage.setItem(\"fromCart\", 1);\r\n\t\tthis.context.router.history.push(\"/my-addresses\");\r\n\t};\r\n\tgotoLoginPage = () => {\r\n\t\tlocalStorage.setItem(\"fromCartToLogin\", 1);\r\n\t\tthis.context.router.history.push(\"/login\");\r\n\t};\r\n\r\n\trender() {\r\n\t\t// console.log(\"LOADING - \" + this.state.loading);\r\n\r\n\t\tconst { user } = this.props;\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"bg-white cart-checkout-block\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\theight: user.success && localStorage.getItem(\"userSelected\") === \"SELFPICKUP\" ? \"auto\" : \"22vh\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{user.success ? (\r\n\t\t\t\t\t\tuser.data.default_address == null ? (\r\n\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"userSelected\") === \"SELFPICKUP\" && (\r\n\t\t\t\t\t\t\t\t\t<div style={{ marginTop: \"1.6rem\" }}>\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.processCart}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-lg btn-make-payment\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: localStorage.getItem(\"cartColorBg\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: localStorage.getItem(\"cartColorText\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"checkoutSelectPayment\")}\r\n\t\t\t\t\t\t\t\t\t\t\t<Ink duration={400} />\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"userSelected\") === \"DELIVERY\" && (\r\n\t\t\t\t\t\t\t\t\t<div className=\"p-15\">\r\n\t\t\t\t\t\t\t\t\t\t<h2 className=\"almost-there-text m-0 pb-5\">\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartSetYourAddress\")}\r\n\t\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.gotoNewAddressPage}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-lg btn-continue\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: localStorage.getItem(\"storeColor\"),\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"buttonNewAddress\")}\r\n\t\t\t\t\t\t\t\t\t\t\t<Ink duration={500} />\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t{(localStorage.getItem(\"userSelected\") === \"DELIVERY\" ||\r\n\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"userSelected\") === null) && (\r\n\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"px-15 py-10\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.gotoMyAddressPage}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"change-address-text m-0 p-5 pull-right\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: localStorage.getItem(\"storeColor\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartChangeLocation\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Ink duration={400} />\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t<h2 className=\"deliver-to-text m-0 pl-0 pb-5\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartDeliverTo\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{/* <span>{\" | \"}{this.props.eta}{\" \"}{localStorage.getItem(\"homePageMinsText\")}</span> */}\r\n\t\t\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"user-address truncate-text m-0 pt-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{user.data.default_address.address}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{user.data.default_address.house !== null && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"truncate-text\" style={{ marginBottom:\"5px\" }}>{user.data.default_address.house}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div style={{borderBottom: '2px dashed rgb(238, 238, 238)', marginBottom: '10px'}} />\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t{this.props.is_operational ? (\r\n\t\t\t\t\t\t\t\t\t\t<div style={{ marginTop: \"1.6rem\" }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.processCart}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-lg btn-make-payment\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: localStorage.getItem(\"cartColorBg\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: localStorage.getItem(\"cartColorText\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"checkoutSelectPayment\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Ink duration={400} />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"auth-error bg-danger\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"error-shake\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartRestaurantNotOperational\")}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div className=\"p-15\">\r\n\t\t\t\t\t\t\t<h2 className=\"almost-there-text m-0 pb-5\">{localStorage.getItem(\"cartLoginHeader\")}</h2>\r\n\t\t\t\t\t\t\t<span className=\"almost-there-sub text-muted\">\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartLoginSubHeader\")}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={this.gotoLoginPage}\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-lg btn-continue\"\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackgroundColor: localStorage.getItem(\"storeColor\"),\r\n\t\t\t\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartLoginButtonText\")}\r\n\t\t\t\t\t\t\t\t<Ink duration={500} />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tuser: state.user.user,\r\n\taddresses: state.addresses.addresses,\r\n\tcartProducts: state.cart.products,\r\n\tcartTotal: state.total.data,\r\n\tcoupon: state.coupon.coupon,\r\n\tcheckout: state.checkout.checkout,\r\n\trestaurant: state.restaurant,\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{\r\n\t\tplaceOrder,\r\n\t\tcheckConfirmCart,\r\n\t\tcheckCartItemsAvailability,\r\n\t\taddProduct,\r\n\t\tupdateCart,\r\n\t}\r\n)(CartCheckoutBlock);\r\n","import React, { Component } from \"react\";\r\n\r\nimport Ink from \"react-ink\";\r\nimport { formatPrice } from \"../../../helpers/formatPrice\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass CartItems extends Component {\r\n\t_getItemTotal = (item) => {\r\n\t\tlet addonTotal = 0;\r\n\t\tlet sum = 0;\r\n\t\tif (item.selectedaddons) {\r\n\t\t\titem.selectedaddons.map((addonArray) => {\r\n\t\t\t\taddonTotal += parseFloat(addonArray.price);\r\n\t\t\t\treturn addonTotal;\r\n\t\t\t});\r\n\t\t}\r\n\t\tsum += item.price * item.quantity + addonTotal * item.quantity;\r\n\t\tsum = parseFloat(sum);\r\n\r\n\t\tif (localStorage.getItem(\"currencySymbolAlign\") === \"left\") {\r\n\t\t\treturn localStorage.getItem(\"currencyFormat\") + formatPrice(sum);\r\n\t\t} else {\r\n\t\t\treturn formatPrice(sum) + localStorage.getItem(\"currencyFormat\");\r\n\t\t}\r\n\t};\r\n\t_generateKey = (pre) => {\r\n\t\tlet newkey = `${pre}_${new Date().getTime()}_${Math.random()\r\n\t\t\t.toString(36)\r\n\t\t\t.substring(2, 15) +\r\n\t\t\tMath.random()\r\n\t\t\t\t.toString(36)\r\n\t\t\t\t.substring(2, 15)}`;\r\n\t\tconsole.log(newkey);\r\n\t\treturn newkey;\r\n\t};\r\n\trender() {\r\n\t\tconst { addProductQuantity, removeProductQuantity, item, removeProduct } = this.props;\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div className=\"cart-item-meta pt-15 pb-15 align-items-center\">\r\n\t\t\t\t\t<div className=\"cart-item-name\">\r\n\t\t\t\t\t\t{localStorage.getItem(\"showVegNonVegBadge\") === \"true\" && item.is_veg !== null && (\r\n\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t{item.is_veg ? (\r\n\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\tsrc=\"/assets/img/various/veg-icon-bg.png\"\r\n\t\t\t\t\t\t\t\t\t\talt=\"Veg\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ width: \"1rem\" }}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"mr-1\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\tsrc=\"/assets/img/various/non-veg-icon-bg.png\"\r\n\t\t\t\t\t\t\t\t\t\talt=\"Non-Veg\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ width: \"1rem\" }}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"mr-1\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t<span className={`${!item.is_active && \"text-danger\"}`}>\r\n\t\t\t\t\t\t\t{item.name}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t{item.selectedaddons && (\r\n\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t{item.selectedaddons.map((addonArray, index) => (\r\n\t\t\t\t\t\t\t\t\t<React.Fragment key={item.id + addonArray.addon_id}>\r\n\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"showAddonPricesOnCart\") === \"true\" ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"ml-4 cart-addon-name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"p-0 m-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{addonArray.addon_name +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\" - \" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\") +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taddonArray.price}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{/* {(index ? \", \" : \"\") + addonArray.addon_name + \"- \" + addonArray.price } */}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"ml-4 cart-addon-name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{(index ? \", \" : \"\") + addonArray.addon_name}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{item.is_active ? (\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t<div className=\"btn-group btn-group-sm cart-item-btn\">\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\tclassName={`btn btn-add-remove ${item.quantity === 1 ? \"btn-cart-no-item-m\" : \"btn-cart-item-m\"}`}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tcolor: localStorage.getItem(\"cartColor-bg\"),\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tonClick={() => removeProductQuantity(item)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<span className=\"btn-dec\">\r\n\t\t\t\t\t\t\t\t\t\t{item.quantity === 1 ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"si si-trash\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: \"0.8rem\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttop: \"-0.2rem\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tWebkitTextStroke: \"0.4px #f44336\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"#f44336\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\" \"\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t<Ink duration=\"500\" />\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-quantity btn-cart-item-q\">\r\n\t\t\t\t\t\t\t\t\t{item.quantity}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-add-remove btn-cart-item-p\"\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tcolor: localStorage.getItem(\"cartColor-bg\"),\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tonClick={() => addProductQuantity(item)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<span className=\"btn-inc\">+</span>\r\n\t\t\t\t\t\t\t\t\t<Ink duration=\"500\" />\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"cart-item-price\">\r\n\t\t\t\t\t\t\t\t<React.Fragment>{this._getItemTotal(item)}</React.Fragment>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-add-remove text-danger btn-cart-item-m\"\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tcolor: localStorage.getItem(\"cartColor-bg\"),\r\n\t\t\t\t\t\t\t\t\tminWidth: \"132.05px\",\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tremoveProduct(item);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartRemoveItemButton\")}\r\n\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t<div className=\"cart-item-price text-danger\">\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartItemNotAvailable\")}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tcartProducts: state.cart.products,\r\n\tcartTotal: state.total.data,\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{}\r\n)(CartItems);\r\n","import React, { Component } from \"react\";\r\n\r\nimport Ink from \"react-ink\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { applyCoupon } from \"../../../../services/coupon/actions\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass Coupon extends Component {\r\n\tstate = {\r\n\t\tinputCoupon: \"\",\r\n\t\tcouponFailed: false,\r\n\t\tcouponFailedType: \"\",\r\n\t\tcouponSubtotalMessage: \"\",\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\t// automatically apply coupon if already exists in localstorage\r\n\t\tif (localStorage.getItem(\"appliedCoupon\")) {\r\n\t\t\tthis.setState({ inputCoupon: localStorage.getItem(\"appliedCoupon\") }, () => {\r\n\t\t\t\t// this.refs.couponInput.defaultValue = localStorage.getItem(\"appliedCoupon\");\r\n\t\t\t\tconst { user } = this.props;\r\n\t\t\t\tconst token = user.success ? this.props.user.data.auth_token : null;\r\n\t\t\t\tthis.props.applyCoupon(\r\n\t\t\t\t\ttoken,\r\n\t\t\t\t\tlocalStorage.getItem(\"appliedCoupon\"),\r\n\t\t\t\t\tthis.props.restaurant_info.id,\r\n\t\t\t\t\tthis.props.subtotal\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tconst { coupon } = this.props;\r\n\t\t//check if props changed after calling the server\r\n\t\tif (coupon !== nextProps.coupon) {\r\n\t\t\t//if nextProps.coupon is successful then\r\n\t\t\tif (nextProps.coupon.success) {\r\n\t\t\t\tconsole.log(\"SUCCESS COUPON\");\r\n\t\t\t\tlocalStorage.setItem(\"appliedCoupon\", nextProps.coupon.code);\r\n\t\t\t\tthis.setState({ couponFailed: false });\r\n\t\t\t} else {\r\n\t\t\t\t// console.log(\"COUPON Removed\");\r\n\t\t\t\t// coupon is invalid\r\n\t\t\t\t// console.log(\"FAILED COUPON\");\r\n\t\t\t\tlocalStorage.removeItem(\"appliedCoupon\");\r\n\t\t\t\tlocalStorage.removeItem(\"couponAppliedAmount\");\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcouponFailed: !nextProps.coupon.hideMessage,\r\n\t\t\t\t\tcouponFailedType: nextProps.coupon.type,\r\n\t\t\t\t\tcouponSubtotalMessage: nextProps.coupon.message,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\thandleInput = (event) => {\r\n\t\tthis.setState({ inputCoupon: event.target.value });\r\n\t};\r\n\r\n\thandleSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tconst { user } = this.props;\r\n\t\tconst token = user.success ? this.props.user.data.auth_token : null;\r\n\t\tthis.props.applyCoupon(token, this.state.inputCoupon, this.props.restaurant_info.id, this.props.subtotal);\r\n\t};\r\n\r\n\tcomponentWillUnmount() {\r\n\t\t// this.props.coupon.code = undefined;\r\n\t\t// localStorage.removeItem(\"appliedCoupon\");\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { coupon, user } = this.props;\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div className=\"input-group bg-white mb-15\">\r\n\t\t\t\t\t{/* <Link\r\n\t\t\t\t\tto={{\r\n\t\t\t\t\t\tpathname: \"/cart/apply-coupon\"\r\n\t\t\t\t\t}}\t\r\n\t\t\t\t\t> */}\r\n\t\t\t\t\t<div className=\"input-group btn-group-cpn-apply\">\r\n\t\t\t\t\t\t<div className=\"input-group-prepend\">\r\n\t\t\t\t\t\t\t<div className=\"btn apply-coupon-btn pt-15\">\r\n\t\t\t\t\t\t\t\t<i className=\"icon-offersOutline offers-icon\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span className=\"input-group apply-coupon-text pt-15\">\r\n\t\t\t\t\t\t{localStorage.getItem(\"cartCouponText\")}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<div className=\"input-group-append\">\r\n\t\t\t\t\t\t\t<div type=\"submit\" className=\"btn apply-coupon-arrow\">\r\n\t\t\t\t\t\t\t\t<i className=\"icon-rightArrow\" style={{ color : \"#bebfc5\" }}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/* </Link> */}\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div className=\"coupon-status\">\r\n\t\t\t\t\t\t{coupon.code && (\r\n\t\t\t\t\t\t\t<div className=\"coupon-success pt-10 pb-10\">\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"showCouponDescriptionOnSuccess\") === \"true\" ? (\r\n\t\t\t\t\t\t\t\t\t<React.Fragment>{coupon.description}</React.Fragment>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t{'\"' + coupon.code + '\"'} {localStorage.getItem(\"cartApplyCoupon\")}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t{coupon.discount_type === \"PERCENTAGE\" ? (\r\n\t\t\t\t\t\t\t\t\t\t\tcoupon.discount + \"%\"\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\") + coupon.discount}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcoupon.discount + localStorage.getItem(\"currencyFormat\")}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartCouponOffText\")}\r\n\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{/* Coupon is not applied, then coupon state is true */}\r\n\t\t\t\t\t\t{this.state.couponFailed &&\r\n\t\t\t\t\t\t\t(this.state.couponFailedType === \"MINSUBTOTAL\" ? (\r\n\t\t\t\t\t\t\t\t<div className=\"coupon-fail pt-10 pb-10\">{this.state.couponSubtotalMessage}</div>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<div className=\"coupon-fail pt-10 pb-10\">\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartInvalidCoupon\")}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t{/* {!user.success && (\r\n\t\t\t\t\t\t\t<div className=\"coupon-not-loggedin-message pt-10 pb-10\">\r\n\t\t\t\t\t\t\t\t<i className=\"si si-info mr-2\" />\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"couponNotLoggedin\")}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)} */}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tcoupon: state.coupon.coupon,\r\n\trestaurant_info: state.items.restaurant_info,\r\n\tuser: state.user.user,\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ applyCoupon }\r\n)(Coupon);\r\n","import React, { Component } from \"react\";\r\n\r\nclass OrderComment extends Component {\r\n\tstate = {\r\n\t\tcomment: \"\",\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({ comment: localStorage.getItem(\"orderComment\") });\r\n\t}\r\n\r\n\thandleInput = (event) => {\r\n\t\tthis.setState({ comment: event.target.value });\r\n\t\tlocalStorage.setItem(\"orderComment\", event.target.value);\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tclassName=\"form-control order-comment\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder={localStorage.getItem(\"cartSuggestionPlaceholder\")}\r\n\t\t\t\t\tonChange={this.handleInput}\r\n\t\t\t\t\tvalue={this.state.comment || \"\"}\r\n\t\t\t\t\trows=\"1\"\r\n\t\t\t\t/>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default OrderComment;\r\n","import React, { Component } from \"react\";\r\n\r\nimport ContentLoader from \"react-content-loader\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Ink from \"react-ink\";\r\n\r\nimport Slide from \"react-reveal/Slide\";\r\n\r\nclass RestaurantInfoCart extends Component {\r\n\tstate = {\r\n\t\topen: false,\r\n\t\tisHomeDelivery: true,\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (localStorage.getItem(\"enSPU\") === \"false\") {\r\n\t\t\tthis.setState({ userPreferredSelectionDelivery: true, isHomeDelivery: true });\r\n\t\t} else {\r\n\t\t\tif (localStorage.getItem(\"userSelected\") === \"DELIVERY\") {\r\n\t\t\t\tthis.setState({ userPreferredSelectionDelivery: true, isHomeDelivery: true });\r\n\t\t\t}\r\n\t\t\tif (localStorage.getItem(\"userSelected\") === \"SELFPICKUP\") {\r\n\t\t\t\tthis.setState({ userPreferredSelectionSelfPickup: true, isHomeDelivery: false });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandlePopup = () => {\r\n\t\tthis.setState({ open: !this.state.open });\r\n\t};\r\n\r\n\tsetDeliveryType = (data) => {\r\n\t\tthis.setState(\r\n\t\t\t{\r\n\t\t\t\tisHomeDelivery: data === \"delivery\" ? true : false,\r\n\t\t\t},\r\n\t\t\t() => {\r\n\t\t\t\tif (this.state.isHomeDelivery) {\r\n\t\t\t\t\tthis.setState({ userPreferredSelectionDelivery: true, userPreferredSelectionSelfPickup: false });\r\n\t\t\t\t\tlocalStorage.setItem(\"userPreferredSelection\", \"DELIVERY\");\r\n\t\t\t\t\tlocalStorage.setItem(\"userSelected\", \"DELIVERY\");\r\n\t\t\t\t} else if (!this.state.isHomeDelivery) {\r\n\t\t\t\t\tthis.setState({ userPreferredSelectionSelfPickup: true, userPreferredSelectionDelivery: false });\r\n\t\t\t\t\tlocalStorage.setItem(\"userPreferredSelection\", \"SELFPICKUP\");\r\n\t\t\t\t\tlocalStorage.setItem(\"userSelected\", \"SELFPICKUP\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.setState({ open: !this.state.open });\r\n\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t}, 500);\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\r\n\tdisplaySliderForDeliveryType = () => {\r\n\t\treturn (\r\n\t\t\t<div className=\"d-flex justify-content-center\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tthis.setDeliveryType(\"delivery\");\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName=\"position-relative cart-delivery-type-img mr-30\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tfilter: localStorage.getItem(\"userSelected\") === \"DELIVERY\" ? \"grayscale(0)\" : \"grayscale(1)\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Slide left duration={350}>\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tsrc=\"assets/img/various/home-delivery.png\"\r\n\t\t\t\t\t\t\tclassName=\"img-fluid\"\r\n\t\t\t\t\t\t\talt={localStorage.getItem(\"deliveryTypeDelivery\")}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<p className=\"text-center font-weight-bold text-muted mb-0 mt-1\">\r\n\t\t\t\t\t\t\t{localStorage.getItem(\"deliveryTypeDelivery\")}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</Slide>\r\n\t\t\t\t\t<Ink duration=\"500\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tthis.setDeliveryType(\"selfpickup\");\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName=\"position-relative cart-delivery-type-img\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tfilter: localStorage.getItem(\"userSelected\") === \"SELFPICKUP\" ? \"grayscale(0)\" : \"grayscale(1)\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Slide right duration={350}>\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tsrc=\"assets/img/various/self-pickup.png\"\r\n\t\t\t\t\t\t\tclassName=\"img-fluid\"\r\n\t\t\t\t\t\t\talt={localStorage.getItem(\"deliveryTypeSelfPickup\")}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<p className=\"text-center font-weight-bold text-muted mb-0 mt-1\">\r\n\t\t\t\t\t\t\t{localStorage.getItem(\"deliveryTypeSelfPickup\")}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</Slide>\r\n\t\t\t\t\t<Ink duration=\"500\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { restaurant } = this.props;\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div className=\"bg-white\">\r\n\t\t\t\t\t{restaurant.length === 0 ? (\r\n\t\t\t\t\t\t<ContentLoader\r\n\t\t\t\t\t\t\theight={150}\r\n\t\t\t\t\t\t\twidth={400}\r\n\t\t\t\t\t\t\tspeed={1.2}\r\n\t\t\t\t\t\t\tprimaryColor=\"#f3f3f3\"\r\n\t\t\t\t\t\t\tsecondaryColor=\"#ecebeb\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<rect x=\"20\" y=\"70\" rx=\"4\" ry=\"4\" width=\"80\" height=\"78\" />\r\n\t\t\t\t\t\t\t<rect x=\"144\" y=\"85\" rx=\"0\" ry=\"0\" width=\"115\" height=\"18\" />\r\n\t\t\t\t\t\t\t<rect x=\"144\" y=\"115\" rx=\"0\" ry=\"0\" width=\"165\" height=\"16\" />\r\n\t\t\t\t\t\t</ContentLoader>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t{/* <div className=\"bg-light pb-10 d-flex store-info-cartpage\" style={{ paddingTop: \"5rem\" }}>\r\n\t\t\t\t\t\t\t\t<div className=\"px-15 mt-5\">\r\n\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\tsrc={restaurant.image}\r\n\t\t\t\t\t\t\t\t\t\talt={restaurant.name}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"restaurant-image mt-0\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"mt-5 pb-15 w-100\">\r\n\t\t\t\t\t\t\t\t\t<h4 className=\"font-w600 mb-5 text-dark\">{restaurant.name}</h4>\r\n\t\t\t\t\t\t\t\t\t<div className=\"font-size-sm text-muted truncate-text text-muted\">\r\n\t\t\t\t\t\t\t\t\t\t{restaurant.description}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t{restaurant.is_pureveg === 1 && (\r\n\t\t\t\t\t\t\t\t\t\t<p className=\"mb-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-size-sm pr-1 text-muted\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"pureVegText\")}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"/assets/img/various/pure-veg.png\"\r\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"PureVeg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: \"20px\" }}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t<div className=\"text-center restaurant-meta mt-5 d-flex align-items-center justify-content-between text-muted\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-2 p-0 text-left store-rating-block\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"fa fa-star\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: localStorage.getItem(\"storeColor\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t/>{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t{restaurant.avgRating === \"0\" ? restaurant.rating : restaurant.avgRating}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-4 p-0 text-center store-distance-block\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i className=\"si si-clock\" /> {restaurant.delivery_time}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"homePageMinsText\")}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-6 p-0 text-center store-avgprice-block\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i className=\"si si-wallet\" />{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{restaurant.price_range}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{restaurant.price_range}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencyFormat\")}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"homePageForTwoText\")}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div> */}\r\n\t\t\t\t\t\t\t{localStorage.getItem(\"enSPU\") === \"true\" && restaurant.delivery_type === 3 && (\r\n\t\t\t\t\t\t\t\t<div className=\"px-15 cart-page-both-delivery-card\">\r\n\t\t\t\t\t\t\t\t\t<p className=\"mb-0\">\r\n\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartDeliveryTypeOptionAvailableText\")}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<span className=\"mr-1\">\r\n\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartDeliveryTypeSelectedText\")}:{\" \"}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"font-weight-bold mr-1\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ color: localStorage.getItem(\"storeColor\") }}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"userSelected\") === \"DELIVERY\"\r\n\t\t\t\t\t\t\t\t\t\t\t? localStorage.getItem(\"deliveryTypeDelivery\")\r\n\t\t\t\t\t\t\t\t\t\t\t: localStorage.getItem(\"deliveryTypeSelfPickup\")}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t<span onClick={this.handlePopup}>\r\n\t\t\t\t\t\t\t\t\t\t(<u>{localStorage.getItem(\"cartDeliveryTypeChangeButtonText\")}</u>)\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t<Dialog\r\n\t\t\t\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\t\t\t\tfullScreen={false}\r\n\t\t\t\t\t\t\t\topen={this.state.open}\r\n\t\t\t\t\t\t\t\tonClose={this.handlePopup}\r\n\t\t\t\t\t\t\t\tstyle={{ width: \"100%\", margin: \"auto\" }}\r\n\t\t\t\t\t\t\t\tPaperProps={{ style: { backgroundColor: \"#fff\", borderRadius: \"4px\" } }}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div className=\"container\" style={{ borderRadius: \"4px\", height: \"220px\" }}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"col-12 pt-20 pb-30\">\r\n\t\t\t\t\t\t\t\t\t\t<h1 className=\"mt-2 mb-0 font-weight-black h4 mb-30 text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartChooseDeliveryTypeTitle\")}\r\n\t\t\t\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t\t\t\t{this.displaySliderForDeliveryType()}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Dialog>\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default RestaurantInfoCart;\r\n","import React, { Component } from \"react\";\r\n\r\nclass UserBan extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div className=\"bg-white\">\r\n\t\t\t\t\t<div className=\"d-flex justify-content-center mt-100 mb-20\">\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tclassName=\"offline-mode-img text-center\"\r\n\t\t\t\t\t\t\tsrc=\"/assets/img/various/user-ban.png\"\r\n\t\t\t\t\t\t\talt=\"user-ban\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{localStorage.getItem(\"userInActiveMessage\") !== \"<p><br></p>\" &&\r\n\t\t\t\t\t\tlocalStorage.getItem(\"userInActiveMessage\") !== \"null\" &&\r\n\t\t\t\t\t\t(localStorage.getItem(\"userInActiveMessage\") !== \"\" && (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t\t\t\t__html: localStorage.getItem(\"userInActiveMessage\"),\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default UserBan;\r\n","import React, { Component } from \"react\";\r\nimport Ink from \"react-ink\";\r\nimport { applyCoupon } from \"../../../../services/coupon/actions\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass NewCoupon extends Component {\r\n    static contextTypes = {\r\n\t\trouter: () => null,\r\n\t};\r\n\r\n    state = {\r\n        error_msg: false,\r\n        inputCoupon: \"\",\r\n\t\tcouponFailed: false,\r\n\t\tcouponFailedType: \"\",\r\n\t\tcouponSubtotalMessage: \"\",\r\n        // appliedAmount: \"\",\r\n    };\r\n\r\n    componentDidMount() {\r\n        // automatically apply coupon if already exists in localstorage\r\n\t\tif (localStorage.getItem(\"appliedCoupon\") && localStorage.getItem(\"activeRestaurant\")) {\r\n\t\t\tconst { user } = this.props;\r\n            const token = user.success ? this.props.user.data.auth_token : null;\r\n            this.props.applyCoupon(\r\n            token,\r\n            localStorage.getItem(\"appliedCoupon\"),\r\n            localStorage.getItem(\"activeRestaurant\") ? localStorage.getItem(\"activeRestaurant\") : this.props.restaurant_info.id,\r\n            this.props.subtotal\r\n            );\r\n\t\t}\r\n    }\r\n\r\n    checkAndSetAppliedAmount = () => {\r\n\t\tlet elem = \"\";\r\n        if(localStorage.getItem(\"couponAppliedAmount\") !== null){\r\n            if(localStorage.getItem(\"currencySymbolAlign\") === \"left\"){\r\n                elem = localStorage.getItem(\"currencyFormat\") + parseFloat(localStorage.getItem(\"couponAppliedAmount\")).toFixed(0);\r\n            } else {\r\n                elem = parseFloat(localStorage.getItem(\"couponAppliedAmount\")).toFixed(0) + localStorage.getItem(\"currencyFormat\")\r\n            }\r\n        } else {\r\n            const { coupon } = this.props;\r\n            console.log('testing', coupon.discount);\r\n            if(localStorage.getItem(\"currencySymbolAlign\") === \"left\"){\r\n                elem = localStorage.getItem(\"currencyFormat\") + parseFloat(coupon.discount).toFixed(0);\r\n            } else {\r\n                elem = parseFloat(coupon.discount).toFixed(0) + localStorage.getItem(\"currencyFormat\")\r\n            }\r\n        }\r\n\r\n\t\tif (this.refs.appliedAmount) {\r\n\t\t\tthis.refs.appliedAmount.innerHTML = elem;\r\n\t\t}\r\n\t};\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if(nextProps.coupon.appliedAmount) {\r\n            const saveCouponAppliedAmount = new Promise((resolve) => {\r\n                resolve(\"Saved\");\r\n            });\r\n            saveCouponAppliedAmount.then(() => {\r\n                this.checkAndSetAppliedAmount(nextProps.coupon.discount);\r\n            });\r\n        }\r\n\t}\r\n    showCoupons = () => {\r\n        const { user } = this.props;\r\n        const { history } = this.context.router;\r\n        if(user.success){\r\n            history.push(\"/cart/coupons\", this.props.subtotal);\r\n        } else {\r\n            this.setState({ error_msg: true });\r\n            setTimeout(() => {\r\n                this.setState({ error_msg: false });\r\n            }, 3000);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { user, coupon } = this.props;\r\n\r\n\t\tif (!user.success) {\r\n\t\t\t// return (\r\n\t\t\t// \t<Redirect to={\"/cart\"} />\r\n\t\t\t// );\r\n\t\t}\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.error_msg && (\r\n\t\t\t\t\t<div className=\"auth-error mb-50\">\r\n\t\t\t\t\t\t<div className=\"error-shake\">Login to apply coupon</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n                <div onClick={this.showCoupons} className={`coupon-success d-flex justify-content-between px-15 pb-15 mx-15 mb-15 position-relative`}>\r\n                    {coupon.code ? (\r\n                        <div>\r\n                        <span>'{coupon.code}' Coupon Applied </span><br />\r\n                        <p className=\"mb-0\">You saved <span style={{color: 'rgb(252, 128, 25)'}} ref=\"appliedAmount\">{this.checkAndSetAppliedAmount()}</span></p>\r\n                      </div>\r\n                    ):(\r\n                    <div>\r\n                        <img src=\"/assets/img/various/offer.png\" alt=\"coupon\" className=\"mr-2\" style={{width:\"25px\"}}/>\r\n                        Apply Coupon\r\n                    </div>\r\n                    )}\r\n                    <div>\r\n                        <i className=\"si si-arrow-right text-muted font-size-md\" />\r\n                    </div>\r\n                    <Ink duration=\"500\" />\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tcoupon: state.coupon.coupon,\r\n\trestaurant_info: state.items.restaurant_info,\r\n\tuser: state.user.user,\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ applyCoupon }\r\n)(NewCoupon);\r\n","import React, { Component } from \"react\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport { applyCoupon } from \"../../../../services/coupon/actions\";\r\nimport { connect } from \"react-redux\";\r\nimport Lottie from 'react-lottie-player';\r\nimport lottieJson from './lf20_tkeaajkc.json';\r\n\r\nclass CouponSuccess extends Component {\r\n\r\n    render() {\r\n        const { user, coupon } = this.props;\r\n        return (\r\n            <React.Fragment>\r\n                <Dialog\r\n\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\tfullScreen={false}\r\n\t\t\t\t\topen={this.props.open}\r\n\t\t\t\t\tonClose={this.props.handleCouponDialog}\r\n\t\t\t\t\tstyle={{ width: \"80%\", margin: \"auto\" }}\r\n\t\t\t\t\tPaperProps={{ style: { backgroundColor: \"rgb(255, 255, 255)\", borderRadius: \"10px\", overflow: \"visible\" } }}\r\n\t\t\t\t>\r\n                    <Lottie\r\n                    onClick={this.props.handleCouponDialog}\r\n                    loop\r\n                    animationData={lottieJson}\r\n                    play\r\n                    style={{height: 'auto', position: 'absolute', left: '50%', top: '50%', transform: 'translate(-50%, -50%)', width: '470px'}}\r\n                    />\r\n                    <div className=\"text-center d-flex justify-content-center align-items-end\" style={{height: '13rem'}}>\r\n                        <img src=\"/assets/img/various/offer.png\" alt=\"Coupon Applied\" className=\"couponAppliedPopupImage\" />\r\n                        <div>\r\n                            <b>{coupon.code}</b> Coupon Applied\r\n                            <h3 className=\"mb-0 mt-3 h3\"><b>You saved {localStorage.getItem(\"couponAppliedAmount\") ? localStorage.getItem(\"currencySymbolAlign\") === \"left\" ? localStorage.getItem(\"currencyFormat\") + parseFloat(localStorage.getItem(\"couponAppliedAmount\")).toFixed(0) : parseFloat(localStorage.getItem(\"couponAppliedAmount\")).toFixed(0) + localStorage.getItem(\"currencyFormat\") : localStorage.getItem(\"currencySymbolAlign\") === \"left\" ? localStorage.getItem(\"currencyFormat\") + parseFloat(coupon.discount).toFixed(0) : parseFloat(coupon.discount).toFixed(0) + localStorage.getItem(\"currencyFormat\")}</b></h3>\r\n                            <div onClick={this.props.handleCouponDialog} className=\"couponAppliedCloseBtn\">Awesome</div>\r\n                        </div>\r\n                    </div>\r\n\t\t\t\t</Dialog>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\nconst mapStateToProps = (state) => ({\r\n\tcoupon: state.coupon.coupon,\r\n\trestaurant_info: state.items.restaurant_info,\r\n\tuser: state.user.user,\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ applyCoupon }\r\n)(CouponSuccess);\r\n","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\n\r\nclass OrderScheduling extends Component {\r\n\tstate = {\r\n\t\ttimeStops: [],\r\n\t\ttime: [],\r\n\t\tday: \"\",\r\n\t\tslotsArray: [],\r\n\t\tdays: [],\r\n\t\tsortedArray: [],\r\n\t\topen: false,\r\n\t\ttodayDate: null,\r\n\t\tselectedDate: null,\r\n\t\tslotsDays: [],\r\n\t\tselectedSlot: {},\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getCurrentDay();\r\n\t\tif (JSON.parse(this.props.restaurant.schedule_data)) {\r\n\t\t\tthis.getSlots(\r\n\t\t\t\tJSON.parse(this.props.restaurant.schedule_data)[this.getCurrentDay(new Date().getDay())],\r\n\t\t\t\t30,\r\n\t\t\t\t\"m\"\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet d1 = new Date();\r\n\t\tthis.setState({\r\n\t\t\ttodayDate: moment(new Date()).format(\"YYYY-MM-DD\"),\r\n\t\t\tcurrentTime: moment(d1.getTime()).format(\"hh:mm A\"),\r\n\t\t\tselectedDate: moment(new Date()).format(\"YYYY-MM-DD\"),\r\n\t\t});\r\n\r\n\t\tlet arr = [];\r\n\t\tfor (let i = 0; i < Object.keys(JSON.parse(this.props.restaurant.schedule_data)).length; i++) {\r\n\t\t\tarr.push({\r\n\t\t\t\tdays: Object.keys(JSON.parse(this.props.restaurant.schedule_data))[i],\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.setState({ slotsDays: arr }, () => {\r\n\t\t\tthis.getCurrentWeek();\r\n\t\t});\r\n\t}\r\n\r\n\tgetCurrentDay = (i) => {\r\n\t\tlet day;\r\n\t\tswitch (i) {\r\n\t\t\tcase 0:\r\n\t\t\t\tday = \"sunday\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tday = \"monday\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tday = \"tuesday\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tday = \"wednesday\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4:\r\n\t\t\t\tday = \"thursday\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 5:\r\n\t\t\t\tday = \"friday\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 6:\r\n\t\t\t\tday = \"saturday\";\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tday = \"\";\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.setState({ day: day });\r\n\r\n\t\treturn day;\r\n\t};\r\n\r\n\tgetCurrentWeek = () => {\r\n\t\tlet currentDate = moment();\r\n\t\tlet weekStart = currentDate.clone().startOf(\"isoWeek\");\r\n\r\n\t\t// let weekEnd = moment().add(new Date().getDay() - 4, \"days\");\r\n\t\t// let weekEnd = moment().add(new Date().getDay() === 6 ? new Date().getDay() - 4 : new Date().getDay() === 0 ? new Date().getDay() - 1 : new Date().getDay() === new Date().getDay() - 1 ? 1 , \"days\");\r\n\r\n\t\tlet weekEnd = currentDate.clone().endOf(\"isoWeek\") + 1;\r\n\r\n\t\tlet days = [];\r\n\t\tlet nextWeek = [];\r\n\r\n\t\tfor (let i = 0; i <= 6; i++) {\r\n\t\t\tdays.push({\r\n\t\t\t\tday: moment(weekStart)\r\n\t\t\t\t\t.add(i, \"days\")\r\n\t\t\t\t\t.format(\"dddd\"),\r\n\t\t\t\tdate: moment(weekStart)\r\n\t\t\t\t\t.add(i, \"days\")\r\n\t\t\t\t\t.format(\"YYYY-MM-DD\"),\r\n\t\t\t});\r\n\t\t\tnextWeek.push({\r\n\t\t\t\tday: moment(weekEnd)\r\n\t\t\t\t\t.add(i, \"days\")\r\n\t\t\t\t\t.format(\"dddd\"),\r\n\t\t\t\tdate: moment(weekEnd)\r\n\t\t\t\t\t.add(i, \"days\")\r\n\t\t\t\t\t.format(\"YYYY-MM-DD\"),\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tlet arr = [];\r\n\t\tfor (let i = 0; i < days.length; i++) {\r\n\t\t\tif (moment(days[i].date).isSameOrAfter(moment(new Date()).format(\"YYYY-MM-DD\"))) {\r\n\t\t\t\tarr.push(days[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (parseInt(localStorage.getItem(\"orderSchedulingFutureDays\")) > arr.length) {\r\n\t\t\tlet array1 = arr.concat(nextWeek).filter((days) => {\r\n\t\t\t\treturn this.state.slotsDays.some((availSlots) => {\r\n\t\t\t\t\treturn days.day.toLowerCase() === availSlots.days.toLowerCase();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.setState({ days: array1 }, () => {\r\n\t\t\t\tthis.daysAvailable(this.state.days);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlet array1 = arr.filter((days) => {\r\n\t\t\t\treturn this.state.slotsDays.some((availSlots) => {\r\n\t\t\t\t\treturn days.day.toLowerCase() === availSlots.days.toLowerCase();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.setState({ days: array1 }, () => {\r\n\t\t\t\tthis.daysAvailable(this.state.days);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tdaysAvailable = () => {\r\n\t\tif (this.state.days.length > 0) {\r\n\t\t\tthis.state.days.sort((a, b) => {\r\n\t\t\t\tlet day1 = new Date(a.date);\r\n\t\t\t\tlet day2 = new Date(b.date);\r\n\t\t\t\treturn day1 - day2;\r\n\t\t\t});\r\n\r\n\t\t\tif (localStorage.getItem(\"enFixedNumberOfDays\") === \"true\") {\r\n\t\t\t\tlet arr = this.state.days.slice(0, parseInt(localStorage.getItem(\"orderSchedulingFutureDays\")));\r\n\r\n\t\t\t\tif (arr.length > 0) {\r\n\t\t\t\t\tlet sortedArray = arr.filter((days) => {\r\n\t\t\t\t\t\treturn this.state.slotsDays.some((availSlots) => {\r\n\t\t\t\t\t\t\treturn days.day.toLowerCase() === availSlots.days.toLowerCase();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.setState({ sortedArray: sortedArray });\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({ sortedArray: this.state.days });\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgetSlots = (data, timeSlots, format) => {\r\n\t\tlet slots = [];\r\n\t\tif (data && data.length > 0) {\r\n\t\t\tfor (let i = 0; i < data.length; i++) {\r\n\t\t\t\tlet date = moment();\r\n\t\t\t\t//get date and timezone of today\r\n\t\t\t\tlet d1 = date.format().split(\"T\")[0];\r\n\t\t\t\tlet d2 = date.format().split(\"+\")[1];\r\n\r\n\t\t\t\tvar open = moment(d1 + \"T\" + data[i].open + \":00+\" + d2);\r\n\r\n\t\t\t\tlet close = moment(d1 + \"T\" + data[i].close + \":00+\" + d2);\r\n\r\n\t\t\t\t//get the difference in the first open/close time (get number of hours ))\r\n\t\t\t\tlet duration = moment.duration(close.diff(open));\r\n\r\n\t\t\t\t//if Hour = 5, slots will be 10 (30 mins diff)\r\n\t\t\t\tlet slotsAvailable = Math.floor(duration.asHours() * 2);\r\n\r\n\t\t\t\tlet startTime = \"\";\r\n\r\n\t\t\t\tfor (let j = 0; j < slotsAvailable; j++) {\r\n\t\t\t\t\tif (j === 0) {\r\n\t\t\t\t\t\tstartTime = data[i].open;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet time = moment(startTime, \"hh:mm A\");\r\n\t\t\t\t\ttime.add(timeSlots, format);\r\n\r\n\t\t\t\t\tlet slot = {\r\n\t\t\t\t\t\topen: moment(startTime, \"hh:mm A\").format(\"hh:mm A\"),\r\n\t\t\t\t\t\tclose: time.format(\"hh:mm A\"),\r\n\t\t\t\t\t};\r\n\t\t\t\t\tslots.push(slot);\r\n\t\t\t\t\tstartTime = time.format(\"HH:mm A\").split(\" \")[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setState({ slotsArray: slots });\r\n\t\treturn slots;\r\n\t};\r\n\r\n\tsetDay = (scheduleDay) => {\r\n\t\tthis.setState({\r\n\t\t\tday: scheduleDay.day,\r\n\t\t\tselectedDate: scheduleDay.date,\r\n\t\t\tselectedSlot: {},\r\n\t\t});\r\n\t\tlet dateAndDay = {\r\n\t\t\tday: scheduleDay.day,\r\n\t\t\tdate: scheduleDay.date,\r\n\t\t};\r\n\t\tlocalStorage.setItem(\"orderDate\", JSON.stringify(dateAndDay));\r\n\r\n\t\tif (scheduleDay.day !== this.state.day) {\r\n\t\t\tlocalStorage.removeItem(\"orderSlot\");\r\n\t\t}\r\n\r\n\t\tif (scheduleDay) {\r\n\t\t\tlet tomorrow = JSON.parse(this.props.restaurant.schedule_data)[\r\n\t\t\t\tthis.getCurrentDay(\r\n\t\t\t\t\tscheduleDay.day.toLowerCase() === \"sunday\"\r\n\t\t\t\t\t\t? 0\r\n\t\t\t\t\t\t: scheduleDay.day.toLowerCase() === \"monday\"\r\n\t\t\t\t\t\t? 1\r\n\t\t\t\t\t\t: scheduleDay.day.toLowerCase() === \"tuesday\"\r\n\t\t\t\t\t\t? 2\r\n\t\t\t\t\t\t: scheduleDay.day.toLowerCase() === \"wednesday\"\r\n\t\t\t\t\t\t? 3\r\n\t\t\t\t\t\t: scheduleDay.day.toLowerCase() === \"thursday\"\r\n\t\t\t\t\t\t? 4\r\n\t\t\t\t\t\t: scheduleDay.day.toLowerCase() === \"friday\"\r\n\t\t\t\t\t\t? 5\r\n\t\t\t\t\t\t: 6\r\n\t\t\t\t)\r\n\t\t\t];\r\n\t\t\tthis.getSlots(tomorrow, 30, \"m\");\r\n\t\t}\r\n\t};\r\n\r\n\ttoggleSchedulePopup = () => {\r\n\t\tthis.setState({ open: !this.state.open });\r\n\t};\r\n\r\n\tchooseOrderSlot = (dateDetails) => {\r\n\t\tif (localStorage.getItem(\"orderDate\") === null) {\r\n\t\t\tlet dateAndDay = {\r\n\t\t\t\tday: this.state.day,\r\n\t\t\t\tdate: moment(new Date()).format(\"YYYY-MM-DD\"),\r\n\t\t\t};\r\n\t\t\tlocalStorage.setItem(\"orderDate\", JSON.stringify(dateAndDay));\r\n\t\t}\r\n\t\tlocalStorage.setItem(\"orderSlot\", JSON.stringify(dateDetails));\r\n\t\tthis.setState({ selectedSlot: dateDetails });\r\n\t};\r\n\r\n\trenderScheduleButton = () => {\r\n\t\tconst orderDate = localStorage.getItem(\"orderDate\");\r\n\t\tconst orderSlot = localStorage.getItem(\"orderSlot\");\r\n\t\tif (!(orderDate !== null && orderSlot !== null)) {\r\n\t\t\treturn (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<i className=\"si si-clock\" />\r\n\t\t\t\t\t<span className=\"ml-2\">{localStorage.getItem(\"modOSScheduleThisOrderText\")}</span>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tconst orderDateJson = JSON.parse(orderDate);\r\n\t\t\tconst orderSlotJson = JSON.parse(orderSlot);\r\n\t\t\treturn (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<div className=\"d-flex justify-content-between w-100\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"modOSScheduleForText\")} {orderDateJson.day}{\" \"}\r\n\t\t\t\t\t\t\t\t<small className=\"text-white\">({orderDateJson.date})</small> <br />({orderSlotJson.open}{\" \"}\r\n\t\t\t\t\t\t\t\t- {orderSlotJson.close})\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<button className=\"btn btn-sm\" onClick={this.removeSelectedSchedule}>\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"modOSRemoveBtnText\")}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\tremoveSelectedSchedule = (event) => {\r\n\t\tevent.stopPropagation();\r\n\t\tlocalStorage.removeItem(\"orderDate\");\r\n\t\tlocalStorage.removeItem(\"orderSlot\");\r\n\t\tthis.setState({ selectedDate: null, selectedSlot: {}, slotsArray: [] });\r\n\t};\r\n\r\n\trenderDoneButton = () => {\r\n\t\tconst orderDate = localStorage.getItem(\"orderDate\");\r\n\t\tconst orderSlot = localStorage.getItem(\"orderSlot\");\r\n\t\tif (orderDate !== null && orderSlot !== null) {\r\n\t\t\tif (this.state.open) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"btn btn-main\"\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tcolor: localStorage.getItem(\"cartColorText\"),\r\n\t\t\t\t\t\t\t\tbackgroundColor: localStorage.getItem(\"cartColorBg\"),\r\n\t\t\t\t\t\t\t\tposition: \"fixed\",\r\n\t\t\t\t\t\t\t\tbottom: \"0\",\r\n\t\t\t\t\t\t\t\tzIndex: \"9999999\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonClick={this.toggleSchedulePopup}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{localStorage.getItem(\"modOSDoneBtnText\")}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgetFirstSlot = (time) => {\r\n\t\tlet slotBasedOnCurrentTime = moment(this.state.currentTime, \"hh:mm A\").add(\r\n\t\t\tthis.props.restaurant.schedule_slot_buffer,\r\n\t\t\t\"minutes\"\r\n\t\t); //add minutes from store's schedule_slot_buffer value\r\n\t\tlet openTime = moment(time.open, \"hh:mm A\");\r\n\t\tif (slotBasedOnCurrentTime.isSameOrBefore(openTime)) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div className=\"schedule-order-btn p-10 mx-15 mt-2\" onClick={this.toggleSchedulePopup}>\r\n\t\t\t\t\t<React.Fragment>{this.renderScheduleButton()}</React.Fragment>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<Dialog\r\n\t\t\t\t\tmaxWidth={false}\r\n\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\tfullScreen={true}\r\n\t\t\t\t\topen={this.state.open}\r\n\t\t\t\t\tonClose={this.toggleSchedulePopup}\r\n\t\t\t\t\tstyle={{ margin: \"auto\", position: \"absolute\", bottom: \"0\", top: \"25%\" }}\r\n\t\t\t\t\tPaperProps={{\r\n\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\tbackgroundColor: \"#fff\",\r\n\t\t\t\t\t\t\tborderTopLeftRadius: \"15px\",\r\n\t\t\t\t\t\t\tborderTopRightRadius: \"15px\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"container p-0 m-0\" style={{ borderRadius: \"5px\" }}>\r\n\t\t\t\t\t\t<h3 className=\"text-center my-20\">{localStorage.getItem(\"modOSSelectDateTimeText\")}</h3>\r\n\t\t\t\t\t\t<div className=\"slider-wrapper secondary-slider-wrapper sticky-top my-0 mr-20\">\r\n\t\t\t\t\t\t\t{this.state.sortedArray.length > 0 && (\r\n\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t{this.state.sortedArray.map((day) => (\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tkey={day.date}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"slider-wrapper__img-wrapper time-slots\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.day.toLowerCase() === day.day.toLowerCase() &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.selectedDate === day.date\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? localStorage.getItem(\"cartColorBg\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"transparent\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.day.toLowerCase() === day.day.toLowerCase() &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.selectedDate === day.date\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? localStorage.getItem(\"cartColorText\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"#000\",\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.setDay(day)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{day.date === this.state.todayDate\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"Today\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: day.date ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t  moment()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.clone()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.add(1, \"days\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.format(\"YYYY-MM-DD\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"Tomorrow\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: moment(day.date).format(\"Do MMM\") + \" \" + day.day.slice(0, 3)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"time-slots-holder\">\r\n\t\t\t\t\t\t\t{this.state.slotsArray.map((time, index) => (\r\n\t\t\t\t\t\t\t\t<React.Fragment key={index}>\r\n\t\t\t\t\t\t\t\t\t{this.state.todayDate === this.state.selectedDate ? (\r\n\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t{this.getFirstSlot(time) && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"available-time-slot-block\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.selectedSlot.open === time.open\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"selected-slot\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.chooseOrderSlot(time)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{time.open + \" - \" + time.close}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"available-time-slot-block\">\r\n\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.selectedSlot.open === time.open ? \"selected-slot\" : \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.chooseOrderSlot(time)}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{time.open + \" - \" + time.close}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Dialog>\r\n\t\t\t\t{this.renderDoneButton()}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default OrderScheduling;\r\n","import React, { Component } from \"react\";\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport { AppBar, Tabs, Tab, Box, Typography, Radio, FormControlLabel, withStyles, Chip } from '@material-ui/core';\r\nimport { createTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport moment from \"moment\";\r\nimport 'react-tabs/style/react-tabs.css';\r\nimport \"./ScheduledDelivery.css\";\r\n\r\nfunction TabPanel(props) {\r\n    const { children, value, index, ...other } = props;\r\n  \r\n    return (\r\n      <div\r\n        role=\"tabpanel\"\r\n        hidden={value !== index}\r\n        id={`full-width-tabpanel-${index}`}\r\n        aria-labelledby={`full-width-tab-${index}`}\r\n        {...other}\r\n      >\r\n        {value === index && (\r\n        <Box p={3}>\r\n            <Typography component=\"div\">{children}</Typography>\r\n        </Box>\r\n        )}\r\n      </div>\r\n    );\r\n}\r\nconst styles = (theme) => ({\r\n    selected: {\r\n      backgroundColor: '#60b246', // Add custom background color when selected\r\n      color: '#ffffff', // Add custom text color when selected\r\n    },\r\n    headerButton: {\r\n        // backgroundColor: 'your_custom_background_color',\r\n        // color: 'your_custom_text_color',\r\n        // borderRadius: '0px',\r\n        // border: 'transparent',\r\n        // padding: theme.spacing(1),\r\n    },\r\n    btn: {\r\n      // Add your custom styles for the Bootstrap btn class here\r\n    },\r\n    timeSlotContainer: {\r\n        display: 'grid',\r\n        gridTemplateColumns: '1fr 1fr',\r\n        gridColumnGap: theme.spacing(1),\r\n        gridRowGap: theme.spacing(1),\r\n    },\r\n});\r\n\r\nconst customTheme = createTheme({\r\n    // palette: {\r\n    //   primary: {\r\n    //     main: '#your_custom_color', // Background color\r\n    //   },\r\n    //   text: {\r\n    //     primary: '#your_custom_color', // Text color\r\n    //   },\r\n    // },\r\n});\r\nconst StyledChip = withStyles((theme) => ({\r\n    root: {\r\n      width: '100%',\r\n      [theme.breakpoints.up('sm')]: {\r\n        width: 'auto',\r\n      },\r\n      marginBottom: theme.spacing(1),\r\n      marginRight: theme.spacing(1),\r\n      backgroundColor: '#your_custom_color',\r\n      color: '#your_custom_color',\r\n      fontSize: '.95rem',\r\n      fontWeight: 'bold',\r\n    },\r\n}))(Chip);\r\n\r\nclass ScheduledDelivery extends Component {\r\n\tstate = {\r\n    fullInputDate: null,\r\n    inputDate: moment(new Date()).format(\"YYYY-MM-DD\"),\r\n    inputTimeSlot: \"\",\r\n    todayDate: moment(new Date()).format(\"YYYY-MM-DD\"),\r\n    lastOrderTime: null,\r\n    value: 0, // Initialize value with 0\r\n  };\r\n\r\n\tcomponentDidMount() {\r\n    this.setState({ fullInputDate: localStorage.getItem(\"orderScheduledDeliveryDateFull\") });\r\n\t\tthis.setState({ inputDate: localStorage.getItem(\"orderScheduledDeliveryDate\") });\r\n\t\tthis.setState({ inputTimeSlot: localStorage.getItem(\"orderScheduledDeliveryTimeSlot\") });\r\n\t\tthis.setState({ lastOrderTime: localStorage.getItem(\"lastOrderTime\") });\r\n        \r\n\t\tconst { restaurant } = this.props;\r\n        \r\n        if(restaurant.scheduled_deliveries !== undefined) {\r\n            // console.log(restaurant.scheduled_deliveries);\r\n            restaurant.scheduled_deliveries.map((data, index) => {\r\n                if(index === 0) {\r\n                    this.setInputDate(data);\r\n                    // data.time_slots.map((slot, index) => {\r\n                    //     if(index === 0) {\r\n                    //         this.setInputTimeSlot(slot.title, slot.last_order_time);\r\n                    //     }\r\n                    //     return true;\r\n                    // });\r\n                }\r\n                return true;\r\n            });\r\n        }\r\n\t}\r\n\r\n  // Add a method to validate if a time slot is selected\r\n  validateTimeSlotSelection() {\r\n    if (this.state.inputTimeSlot === '') {\r\n      alert('Please select a time slot before proceeding.');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n\tsetInputDate = (data) => {\r\n\t\tthis.setState({ inputDate: data.full_date });\r\n\t\tlocalStorage.setItem(\"orderScheduledDeliveryDate\", data.full_date);\r\n        // data.time_slots.map((slot, index) => {\r\n        //     if(index === 0) {\r\n        //         this.setInputTimeSlot(slot.title,slot.last_order_time);\r\n        //     }\r\n        //     return true;\r\n        // });\r\n        localStorage.setItem(\"orderScheduledDeliveryDateFull\", data.full_date);\r\n\t};\r\n\r\n\tsetInputTimeSlot = (value, last_order_time) => {\r\n    if (value !== this.state.inputTimeSlot) {\r\n      this.setState({ inputTimeSlot: value });\r\n      this.setState({ lastOrderTime: last_order_time });\r\n      localStorage.setItem(\"orderScheduledDeliveryTimeSlot\", value);\r\n      localStorage.setItem(\"lastOrderTime\", last_order_time);\r\n  \r\n      // Only call the onTimeSlotSelected prop when the time slot is changed\r\n      if (this.props.onTimeSlotSelected) {\r\n        this.props.onTimeSlotSelected(true);\r\n      }\r\n    }\r\n  };\r\n\r\n    handleChange = (event, newValue) => {\r\n        this.setState({ value: newValue });\r\n    };\r\n\r\n    handleChangeIndex = (index) => {\r\n        this.setState({ value: index });\r\n    };\r\n\r\n\trender() {        \r\n\t\tconst { restaurant } = this.props;\r\n\r\n        if(restaurant.scheduled_deliveries === undefined) {\r\n            return (<React.Fragment></React.Fragment>);\r\n        }\r\n\r\n        const sortTimeSlots = (timeSlots) => {\r\n            return timeSlots.sort((a, b) => {\r\n              const aTime = moment(a.title, 'hh:mm A');\r\n              const bTime = moment(b.title, 'hh:mm A');\r\n              return aTime.isBefore(bTime) ? -1 : aTime.isAfter(bTime) ? 1 : 0;\r\n            });\r\n        };\r\n\r\n\t\treturn (\r\n            <React.Fragment>\r\n              <div className=\"p-5\">\r\n                <div\r\n                //   className=\"block-content block-content-full bg-white pt-10 pb-5\"\r\n                //   style={{ borderTopLeftRadius: '5px', borderTopRightRadius: '5px' }}\r\n                >\r\n                  <h2 className=\"item-text p-10 mb-10 text-uppercase\">\r\n                    {localStorage.getItem('scheduledDeliverySectionText')}\r\n                  </h2>\r\n                  <ThemeProvider theme={customTheme}>\r\n                  <AppBar position=\"static\" color=\"default\" className=\"date-selection-appbar\">\r\n                    <Tabs\r\n                      value={this.state.value}\r\n                      onChange={this.handleChange}\r\n                      indicatorColor=\"secondary\"\r\n                      textColor=\"secondary\"\r\n                      variant=\"scrollable\"\r\n                      scrollButtons=\"on\"\r\n                      aria-label=\"full width tabs\"\r\n                    >\r\n                      {restaurant.scheduled_deliveries.map((data, index) => (\r\n                        <Tab\r\n                        key={data.date}\r\n                        label={\r\n                          moment(data.full_date, 'DD MMMM YYYY').format('YYYY-MM-DD') === this.state.todayDate\r\n                            ? 'Today'\r\n                            : moment(data.full_date, 'DD MMMM YYYY').format('YYYY-MM-DD') ===\r\n                            moment().clone().add(1, 'days').format('YYYY-MM-DD')\r\n                            ? 'Tomorrow'\r\n                            : moment(data.full_date, 'DD MMMM YYYY').format('ddd DD-MMM')\r\n                        }\r\n                        onClick={() => {\r\n                          this.setInputDate(data);\r\n                        }}\r\n                        className={`${this.props.classes.headerButton} ${this.props.classes.btn}`} // Add the btn class here\r\n                      />\r\n                      ))}\r\n                    </Tabs>\r\n                  </AppBar>\r\n                  </ThemeProvider>\r\n                  <SwipeableViews\r\n                    axis=\"x\"\r\n                    index={this.state.value}\r\n                    onChangeIndex={this.handleChangeIndex}\r\n                  >\r\n                    {restaurant.scheduled_deliveries.map((data, index) => (\r\n                    <TabPanel key={data.date} value={this.state.value} index={index} className=\"tab-panel\">\r\n                        <div className={this.props.classes.timeSlotContainer}>\r\n                        {sortTimeSlots(data.time_slots).map((slot) => (\r\n                            <StyledChip\r\n                            key={slot.id}\r\n                            label={slot.title}\r\n                            clickable\r\n                            color={this.state.inputTimeSlot === slot.title ? 'secondary' : 'default'}\r\n                            onClick={() => {\r\n                                this.setInputTimeSlot(slot.title, slot.last_order_time);\r\n                            }}\r\n                            />\r\n                        ))}\r\n                        </div>\r\n                    </TabPanel>\r\n                    ))}\r\n                  </SwipeableViews>\r\n                </div>\r\n              </div>\r\n            </React.Fragment>\r\n        );\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(ScheduledDelivery);","import React, { Component } from \"react\";\r\n\r\nimport { checkUserRunningOrder, updateUserInfo, checkBan } from \"../../../services/user/actions\";\r\n\r\nimport BackWithSearch from \"../../Mobile/Elements/BackWithSearch\";\r\nimport BillDetails from \"./BillDetails\";\r\nimport CartCheckoutBlock from \"./CartCheckoutBlock\";\r\nimport CartItems from \"./CartItems\";\r\nimport Coupon from \"./Coupon\";\r\nimport DelayLink from \"../../helpers/delayLink\";\r\nimport Footer from \"../Footer\";\r\nimport Ink from \"react-ink\";\r\nimport Meta from \"../../helpers/meta\";\r\nimport OrderComment from \"./OrderComment\";\r\nimport { Redirect } from \"react-router\";\r\nimport RestaurantInfoCart from \"./RestaurantInfoCart\";\r\nimport { calculateDistance } from \"../../helpers/calculateDistance\";\r\nimport calculateDistanceGoogle from \"../../helpers/calculateDistanceGoogle.js\";\r\nimport { connect } from \"react-redux\";\r\nimport { getRestaurantInfoById, getRestaurantInfoAndOperationalStatus } from \"../../../services/items/actions\";\r\nimport { updateCart } from \"../../../services/total/actions\";\r\nimport { formatPrice } from \"../../helpers/formatPrice\";\r\nimport { addProduct } from \"../../../services/cart/actions\";\r\nimport { AppBar, Tab, Tabs } from '@material-ui/core';\r\n\r\nimport { checkCartItemsAvailability } from \"../../../services/confirmCart/actions\";\r\nimport { GoogleApiWrapper } from \"google-maps-react\";\r\nimport Loading from \"../../helpers/loading\";\r\nimport UserBan from \"../UserBan\";\r\nimport { removeCoupon } from \"../../../services/coupon/actions\";\r\nimport NewCoupon from \"./NewCoupon\";\r\nimport CouponSuccess from \"./CouponSuccess\";\r\nimport Swing from \"react-reveal/Swing\";\r\nimport OrderScheduling from \"../Modules/OrderScheduling\";\r\nimport ScheduledDelivery from \"./ScheduledDelivery\";\r\n\r\nclass Cart extends Component {\r\n\tstatic contextTypes = {\r\n\t\trouter: () => null,\r\n\t};\r\n\r\n\tstate = {\r\n\t\tloading: true,\r\n\t\talreadyRunningOrders: false,\r\n\t\tis_operational_loading: true,\r\n\t\tis_operational: true,\r\n\t\tdistance: 0,\r\n\t\tis_active: false,\r\n\t\tmin_order_satisfied: false,\r\n\t\tprocess_cart_loading: false,\r\n\t\tis_all_items_available: false,\r\n\t\tprocess_distance_calc_loading: false,\r\n\t\tuserBan: false,\r\n\t\ttips: [],\r\n\t\ttips_percentage: [],\r\n\t\ttipsPercentageSetting: false,\r\n\t\ttipsAmountSetting: false,\r\n\t\tothers: false,\r\n\t\tpercentage: false,\r\n\t\tselectedTips: {\r\n\t\t\ttype: \"amount\",\r\n\t\t\tvalue: 0,\r\n\t\t},\r\n\t\tis_tips_show: true,\r\n\t\tshowSuccess: false,\r\n\t\tshow_schedule: true,\r\n\t\tactiveTab: null,\r\n\t\tdeliveryMethod: null,\r\n\t\tshowCheckbox: false,\r\n\t\tslotSelected: false,\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\t//remove tip on reload/first-load\r\n\t\tlocalStorage.removeItem(\"cart_tips\");\r\n\t\tlocalStorage.removeItem(\"deliveryMethod\");\r\n\t\tlocalStorage.removeItem(\"orderScheduledDeliveryDate\");\r\n\t\tlocalStorage.removeItem(\"orderScheduledDeliveryTimeSlot\");\r\n\r\n\t\tlocalStorage.removeItem(\"fromCart\");\r\n\t\tif(localStorage.getItem(\"showSuccessDialog\") !== null && localStorage.getItem(\"showSuccessDialog\") !== undefined) {\r\n\t\t\tthis.setState({showSuccess: true});\r\n\t\t}\r\n\r\n\t\tconst { user } = this.props;\r\n\t\tif (user.success) {\r\n\t\t\tthis.props.checkBan(user.data.auth_token).then((response) => {\r\n\t\t\t\tif (response) {\r\n\t\t\t\t\tif (!response.success) {\r\n\t\t\t\t\t\tthis.setState({ userBan: true, loading: false });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.cartOperationalSteps();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.fetchCheckBanAgain(user.data.auth_token);\r\n\t\t\t\t\t}, 2500);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\ttips: localStorage.getItem(\"tips\") !== null && localStorage.getItem(\"tips\").split(\",\"),\r\n\t\t\t\ttips_percentage:\r\n\t\t\t\t\tlocalStorage.getItem(\"tips_percentage\") !== null &&\r\n\t\t\t\t\tlocalStorage.getItem(\"tips_percentage\").split(\",\"),\r\n\t\t\t\ttipsAmountSetting:\r\n\t\t\t\t\tlocalStorage.getItem(\"showTipsAmount\") !== null &&\r\n\t\t\t\t\tJSON.parse(localStorage.getItem(\"showTipsAmount\").toLowerCase()),\r\n\t\t\t\ttipsPercentageSetting:\r\n\t\t\t\t\tlocalStorage.getItem(\"showTipsPercentage\") !== null &&\r\n\t\t\t\t\tJSON.parse(localStorage.getItem(\"showTipsPercentage\").toLowerCase()),\r\n\t\t\t});\r\n\r\n\t\t\t// console.log(localStorage.getItem(\"userSelected\"));\r\n\t\t\tif (localStorage.getItem(\"userSelected\") === \"SELFPICKUP\") {\r\n\t\t\t\tthis.setState({ is_tips_show: true });\r\n\t\t\t\tthis.setState({ show_schedule: false });\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({ is_tips_show: false });\r\n\t\t\t\tthis.setState({ show_schedule: true });\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.cartOperationalSteps();\r\n\t\t}\r\n\t}\r\n\r\n\thandleChange = (event, newValue) => {\r\n\t\tthis.setState({ activeTab: newValue });\r\n\t  \r\n\t\t// Handle the case when newValue is null\r\n\t\tif (newValue === null) {\r\n\t\t  this.handleDeliveryMethod(null);\r\n\t\t  this.setState({ showCheckbox: false });\r\n\t\t} else {\r\n\t\t  const deliveryMethod = newValue === 0 ? \"Instant\" : \"Scheduled\";\r\n\t\t  this.handleDeliveryMethod(deliveryMethod);\r\n\t  \r\n\t\t  // Update the showCheckbox state based on the new deliveryMethod\r\n\t\t  if (deliveryMethod === 'Instant') {\r\n\t\t\tthis.setState({ showCheckbox: true });\r\n\t\t  } else if (deliveryMethod === 'Scheduled') {\r\n\t\t\t// Set showCheckbox to true when a slot is selected, otherwise false\r\n\t\t\tthis.setState({ showCheckbox: this.state.slotSelected });\r\n\t\t  }\r\n\t\t}\r\n\t};\r\n\r\n\thandleDeliveryMethod = (value) => {\r\n\t\tthis.setState({ deliveryMethod: value });\r\n\t\tlocalStorage.setItem(\"deliveryMethod\", value);\r\n\t};\r\n\r\n\thandleTimeSlotSelected = (selected) => {\r\n\t\tthis.setState({ slotSelected: selected, showCheckbox: selected });\r\n\t};\r\n\r\n\thandleCouponDialog = () => {\r\n\t\tlocalStorage.removeItem(\"showSuccessDialog\");\r\n\t\tthis.setState({ showSuccess: !this.state.showSuccess });\r\n\t};\r\n\r\n\tfetchCheckBanAgain = (token) => {\r\n\t\tthis.props.checkBan(token).then((response) => {\r\n\t\t\tif (response) {\r\n\t\t\t\tif (!response.success) {\r\n\t\t\t\t\tthis.setState({ userBan: true, loading: false });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.cartOperationalSteps();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tcartOperationalSteps = () => {\r\n\t\tconst { user } = this.props;\r\n\r\n\t\tthis.setState({ loading: false });\r\n\t\tif (this.props.cartProducts.length) {\r\n\t\t\tdocument.getElementsByTagName(\"body\")[0].classList.add(\"bg-grey\");\r\n\t\t\tthis.checkForItemsAvailability();\r\n\t\t}\r\n\r\n\t\tif (user.success) {\r\n\t\t\tthis.props.checkUserRunningOrder(user.data.id, user.data.auth_token);\r\n\t\t\tif (this.props.cartProducts.length > 0) {\r\n\t\t\t\tthis.props.updateUserInfo(user.data.id, user.data.auth_token).then((updatedUser) => {\r\n\t\t\t\t\t// console.log(\"THIS SHOULD BE CALLED: UPDATED USER\", updatedUser);\r\n\t\t\t\t\tif (typeof updatedUser !== \"undefined\") {\r\n\t\t\t\t\t\tif (updatedUser.payload.data.default_address !== null) {\r\n\t\t\t\t\t\t\tconst userSetAddress = {\r\n\t\t\t\t\t\t\t\tlat: updatedUser.payload.data.default_address.latitude,\r\n\t\t\t\t\t\t\t\tlng: updatedUser.payload.data.default_address.longitude,\r\n\t\t\t\t\t\t\t\taddress: updatedUser.payload.data.default_address.address,\r\n\t\t\t\t\t\t\t\thouse: updatedUser.payload.data.default_address.house,\r\n\t\t\t\t\t\t\t\ttag: updatedUser.payload.data.default_address.tag,\r\n\t\t\t\t\t\t\t\tcity: updatedUser.payload.data.default_address.city,\r\n\t\t\t\t\t\t\t\tstate: updatedUser.payload.data.default_address.state,\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tconst saveUserSetAddress = new Promise((resolve) => {\r\n\t\t\t\t\t\t\t\tlocalStorage.setItem(\"userSetAddress\", JSON.stringify(userSetAddress));\r\n\t\t\t\t\t\t\t\tresolve(\"Address Saved\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tsaveUserSetAddress.then(() => {\r\n\t\t\t\t\t\t\t\tthis.initRestaurantInfoApi();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.initRestaurantInfoApi();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.warn(\"Failed to fetch update user info... Solution: Reload Page\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.initRestaurantInfoApi();\r\n\t\t\tthis.setState({ alreadyRunningOrders: false });\r\n\t\t}\r\n\t};\r\n\r\n\tinitRestaurantInfoApi = () => {\r\n\t\tif (localStorage.getItem(\"activeRestaurant\") !== null && this.props.cartProducts.length > 0) {\r\n\t\t\tthis.props.getRestaurantInfoById(localStorage.getItem(\"activeRestaurant\")).then((response) => {\r\n\t\t\t\tif (response) {\r\n\t\t\t\t\tif (response.payload.id) {\r\n\t\t\t\t\t\tthis.__doesRestaurantOperatesAtThisLocation(response.payload);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (nextProps.restaurant_info.id) {\r\n\t\t\tthis.__isRestaurantActive(nextProps.restaurant_info);\r\n\r\n\t\t\tthis.__checkMinOrderSatisfied(nextProps.restaurant_info, nextProps.cartTotal);\r\n\t\t}\r\n\r\n\t\tif (nextProps.running_order) {\r\n\t\t\tthis.setState({ alreadyRunningOrders: true });\r\n\t\t}\r\n\t\tif (nextProps.force_reload) {\r\n\t\t\tthis.setState({ loading: true });\r\n\t\t\twindow.location.reload();\r\n\t\t}\r\n\t}\r\n\r\n\taddProductQuantity = (product) => {\r\n\t\tconst { cartProducts, updateCart } = this.props;\r\n\t\tlet productAlreadyInCart = false;\r\n\r\n\t\tcartProducts.forEach((cp) => {\r\n\t\t\tif (cp.id === product.id) {\r\n\t\t\t\tif (JSON.stringify(cp.selectedaddons) === JSON.stringify(product.selectedaddons)) {\r\n\t\t\t\t\tcp.quantity += 1;\r\n\t\t\t\t\tproductAlreadyInCart = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (!productAlreadyInCart) {\r\n\t\t\tcartProducts.push(product);\r\n\t\t}\r\n\r\n\t\tupdateCart(cartProducts);\r\n\t};\r\n\r\n\tremoveProductQuantity = (product) => {\r\n\t\tconst { cartProducts, updateCart } = this.props;\r\n\r\n\t\tconst index = cartProducts.findIndex(\r\n\t\t\t(p) => p.id === product.id && JSON.stringify(p) === JSON.stringify(product)\r\n\t\t);\r\n\t\t//if product is in the cart then index will be greater than 0\r\n\t\tif (index >= 0) {\r\n\t\t\tcartProducts.forEach((cp) => {\r\n\t\t\t\tif (cp.id === product.id) {\r\n\t\t\t\t\tif (JSON.stringify(cp) === JSON.stringify(product)) {\r\n\t\t\t\t\t\tif (cp.quantity === 1) {\r\n\t\t\t\t\t\t\t//if quantity is 1 then remove product from cart\r\n\t\t\t\t\t\t\tcartProducts.splice(index, 1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//else decrement the quantity by 1\r\n\t\t\t\t\t\t\tcp.quantity -= 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tupdateCart(cartProducts);\r\n\t\t\tthis.props.removeCoupon();\r\n\t\t\tlocalStorage.removeItem(\"appliedCoupon\");\r\n\t\t\tlocalStorage.removeItem(\"couponAppliedAmount\");\r\n\t\t}\r\n\t};\r\n\r\n\tremoveProduct = (product) => {\r\n\t\t// console.log(product);\r\n\t\t// console.log(product.id);\r\n\r\n\t\tconst { cartProducts, updateCart } = this.props;\r\n\t\tconst index = cartProducts.findIndex((cp) => cp.id === product.id);\r\n\r\n\t\t// console.log(index);\r\n\t\tcartProducts.splice(index, 1);\r\n\t\t// console.log(cartProducts);\r\n\t\tupdateCart(cartProducts);\r\n\t\tthis.props.removeCoupon();\r\n\t\tlocalStorage.removeItem(\"appliedCoupon\");\r\n\t\tlocalStorage.removeItem(\"couponAppliedAmount\");\r\n\t\tthis.checkForItemsAvailability();\r\n\t};\r\n\r\n\t__doesRestaurantOperatesAtThisLocation = (restaurant_info) => {\r\n\t\t//send user lat long to helper, check with the current restaurant lat long and setstate accordingly\r\n\t\tconst { user } = this.props;\r\n\r\n\t\tif (user.success && user.data.default_address !== null) {\r\n\t\t\tlet self = this;\r\n\t\t\tlet distance = 0;\r\n\t\t\tif (localStorage.getItem(\"enGDMA\") === \"true\") {\r\n\t\t\t\tthis.setState({ process_distance_calc_loading: true });\r\n\t\t\t\tdistance = calculateDistanceGoogle(\r\n\t\t\t\t\trestaurant_info.longitude,\r\n\t\t\t\t\trestaurant_info.latitude,\r\n\t\t\t\t\tuser.data.default_address.longitude,\r\n\t\t\t\t\tuser.data.default_address.latitude,\r\n\t\t\t\t\tthis.props.google,\r\n\t\t\t\t\tfunction(distance) {\r\n\t\t\t\t\t\tconsole.log(\"Distance:\", distance);\r\n\t\t\t\t\t\tself.setState(\r\n\t\t\t\t\t\t\t{ distance: distance, process_distance_calc_loading: false },\r\n\t\t\t\t\t\t\tself.__processRestaurantOperationalState(\r\n\t\t\t\t\t\t\t\trestaurant_info.id,\r\n\t\t\t\t\t\t\t\tuser.data.default_address.latitude,\r\n\t\t\t\t\t\t\t\tuser.data.default_address.longitude\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tdistance = calculateDistance(\r\n\t\t\t\t\trestaurant_info.longitude,\r\n\t\t\t\t\trestaurant_info.latitude,\r\n\t\t\t\t\tuser.data.default_address.longitude,\r\n\t\t\t\t\tuser.data.default_address.latitude\r\n\t\t\t\t);\r\n\t\t\t\tthis.setState(\r\n\t\t\t\t\t{ distance: distance },\r\n\t\t\t\t\tthis.__processRestaurantOperationalState(\r\n\t\t\t\t\t\trestaurant_info.id,\r\n\t\t\t\t\t\tuser.data.default_address.latitude,\r\n\t\t\t\t\t\tuser.data.default_address.longitude\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t//if Google Distance Matrix API is enabled\r\n\t\t\tlet self = this;\r\n\t\t\tlet distance = 0;\r\n\t\t\tif (localStorage.getItem(\"userSetAddress\") !== null) {\r\n\t\t\t\tif (localStorage.getItem(\"enGDMA\") === \"true\") {\r\n\t\t\t\t\tdistance = calculateDistanceGoogle(\r\n\t\t\t\t\t\trestaurant_info.longitude,\r\n\t\t\t\t\t\trestaurant_info.latitude,\r\n\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lng,\r\n\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lat,\r\n\t\t\t\t\t\tthis.props.google,\r\n\t\t\t\t\t\tfunction(distance) {\r\n\t\t\t\t\t\t\tconsole.log(distance);\r\n\t\t\t\t\t\t\tself.setState(\r\n\t\t\t\t\t\t\t\t{ distance: distance },\r\n\t\t\t\t\t\t\t\tself.__processRestaurantOperationalState(\r\n\t\t\t\t\t\t\t\t\trestaurant_info.id,\r\n\t\t\t\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lat,\r\n\t\t\t\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lng\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdistance = calculateDistance(\r\n\t\t\t\t\t\trestaurant_info.longitude,\r\n\t\t\t\t\t\trestaurant_info.latitude,\r\n\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lng,\r\n\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lat\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.setState(\r\n\t\t\t\t\t\t{ distance: distance },\r\n\t\t\t\t\t\tthis.__processRestaurantOperationalState(\r\n\t\t\t\t\t\t\trestaurant_info.id,\r\n\t\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lat,\r\n\t\t\t\t\t\t\tJSON.parse(localStorage.getItem(\"userSetAddress\")).lng\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tis_operational: true,\r\n\t\t\t\t\tis_operational_loading: false,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconsole.log(\"Distance -> \", this.state.distance);\r\n\t\t}\r\n\t};\r\n\r\n\t__processRestaurantOperationalState = (id, lat, lng) => {\r\n\t\tthis.props.getRestaurantInfoAndOperationalStatus(id, lat, lng).then((response) => {\r\n\t\t\tif (response) {\r\n\t\t\t\tif (response.payload.is_operational) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tis_operational: true,\r\n\t\t\t\t\t\tis_operational_loading: false,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tis_operational: false,\r\n\t\t\t\t\t\tis_operational_loading: false,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t__isRestaurantActive = (restaurant_info) => {\r\n\t\tif (restaurant_info.is_active) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tis_active: true,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t__checkMinOrderSatisfied = (restaurant_info, cartTotal) => {\r\n\t\tif (restaurant_info.min_order_price > 0) {\r\n\t\t\t//if not null, then check the min order price with the order total\r\n\t\t\tconst totalPrice = parseFloat(formatPrice(cartTotal.totalPrice));\r\n\t\t\tconst minOrderPrice = parseFloat(formatPrice(restaurant_info.min_order_price));\r\n\t\t\tif (totalPrice >= minOrderPrice) {\r\n\t\t\t\t// console.log(\"Order Can Be Placed\", totalPrice + \" -- \" + minOrderPrice);\r\n\t\t\t\tthis.setState({ min_order_satisfied: true });\r\n\t\t\t} else {\r\n\t\t\t\t// console.log(\"Order CANNOT Be Placed\", totalPrice + \" -- \" + minOrderPrice);\r\n\t\t\t\tthis.setState({ min_order_satisfied: false });\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// if null, then set to satisfied to true...\r\n\t\t\t// console.log(\"Min order price is not set\");\r\n\t\t\tthis.setState({ min_order_satisfied: true });\r\n\t\t}\r\n\t};\r\n\r\n\tcheckForItemsAvailability = () => {\r\n\t\tconst { checkCartItemsAvailability, cartProducts, addProduct, updateCart } = this.props;\r\n\t\tthis.handleProcessCartLoading(true);\r\n\t\tcheckCartItemsAvailability(cartProducts).then((response) => {\r\n\t\t\tthis.handleProcessCartLoading(false);\r\n\t\t\tthis.setState({ process_cart_loading: false });\r\n\t\t\tif (response && response.length) {\r\n\t\t\t\tlet isSomeInactive = false;\r\n\t\t\t\tresponse.map((arrItem) => {\r\n\t\t\t\t\t//find the item in the cart\r\n\t\t\t\t\tlet item = cartProducts.find((item) => item.id === arrItem.id);\r\n\r\n\t\t\t\t\t//get new price and is_active status and set it.\r\n\t\t\t\t\titem.is_active = arrItem.is_active;\r\n\t\t\t\t\titem.price = arrItem.price;\r\n\t\t\t\t\taddProduct(item);\r\n\r\n\t\t\t\t\tif (!isSomeInactive) {\r\n\t\t\t\t\t\tif (!arrItem.is_active) {\r\n\t\t\t\t\t\t\tisSomeInactive = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t});\r\n\t\t\t\tif (isSomeInactive) {\r\n\t\t\t\t\tthis.handleItemsAvailability(false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.handleItemsAvailability(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tupdateCart(this.props.cartProducts);\r\n\t\t});\r\n\t};\r\n\r\n\thandleProcessCartLoading = (value) => {\r\n\t\tthis.setState({ process_cart_loading: value });\r\n\t};\r\n\r\n\thandleItemsAvailability = (value) => {\r\n\t\tthis.setState({ is_all_items_available: value });\r\n\t};\r\n\r\n\tshowOtherText = (type) => {\r\n\t\tlocalStorage.setItem(\"cart_tips\", JSON.stringify({ type: type, value: 0 }));\r\n\t\tthis.setState({\r\n\t\t\tothers: type === \"total\",\r\n\t\t\tpercentage: type === \"percentage\",\r\n\t\t\tselectedTips: { type: type, value: 0 },\r\n\t\t});\r\n\t};\r\n\taddTip = (type, value) => {\r\n\t\tlocalStorage.setItem(\"cart_tips\", JSON.stringify({ type: type, value: value }));\r\n\t\t//localStorage.setItem(\"cart_tips\", JSON.stringify({ type : value});\r\n\t\tthis.setState({ others: false, percentage: false, selectedTips: { type: type, value: value } });\r\n\t};\r\n\taddTipInPercentage = (type, value) => {\r\n\t\tlet calculatedValue = (this.props.cartTotal.totalPrice * value) / 100;\r\n\t\tlocalStorage.setItem(\"cart_tips\", JSON.stringify({ type: type, value: calculatedValue }));\r\n\t\t//localStorage.setItem(\"cart_tips\", JSON.stringify({ type : value});\r\n\t\tthis.setState({ others: false, percentage: false, selectedTips: { type: type, value: calculatedValue } });\r\n\t};\r\n\t// onInputchange = (event) => {\r\n\t// \tthis.setState({\r\n\t// \t\t[event.target.name]: event.target.value,\r\n\t// \t\tselectedTips: { type: event.target.name, value: event.target.value },\r\n\t// \t});\r\n\t// \t// localStorage.setItem(\"orderComment\", event.target.value);\r\n\t// };\r\n\trestrictAlphabates = (e) => {\r\n\t\tconst re = /^[0-9\\b]+$/;\r\n\t\t// let value = e.target.value;\r\n\t\tlet { value, min, max } = e.target;\r\n\t\tvalue = Math.max(Number(min), Math.min(Number(max), Number(value)));\r\n\r\n\t\tif (e.target.value === \"\" || re.test(e.target.value)) {\r\n\t\t\tif (e.target.name === \"percentageValue\" && value !== \"\") {\r\n\t\t\t\tlet calculatedValue = (this.props.cartTotal.totalPrice * value) / 100;\r\n\t\t\t\tlocalStorage.setItem(\"cart_tips\", JSON.stringify({ type: \"percentage\", value: calculatedValue }));\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\t[e.target.name]: value,\r\n\t\t\t\t\tselectedTips: { type: e.target.name, value: calculatedValue },\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (e.target.name === \"flatAmount\" && value !== \"\") {\r\n\t\t\t\tlocalStorage.setItem(\"cart_tips\", JSON.stringify({ type: \"total\", value: value }));\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\t[e.target.name]: value,\r\n\t\t\t\t\tselectedTips: { type: e.target.name, value: value },\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setState({ value });\r\n\t};\r\n\r\n\tremoveTip = () => {\r\n\t\tthis.setState({ others: false, percentage: false, selectedTips: { type: \"amount\", value: 0 } });\r\n\t\tlocalStorage.removeItem(\"cart_tips\");\r\n\r\n\t\tthis.setState({ tipsAmountSetting: false, tipsPercentageSetting: false }, () => {\r\n\t\t\tthis.setState({\r\n\t\t\t\ttipsAmountSetting: JSON.parse(localStorage.getItem(\"showTipsAmount\").toLowerCase()),\r\n\t\t\t\ttipsPercentageSetting: JSON.parse(localStorage.getItem(\"showTipsPercentage\").toLowerCase()),\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tdocument.getElementsByTagName(\"body\")[0].classList.remove(\"bg-grey\");\r\n\t\t//if cart not confirmed, then remove tip\r\n\t\tif (!this.props.confirmCart) {\r\n\t\t\tlocalStorage.removeItem(\"cart_tips\");\r\n\t\t}\r\n\t}\r\n\r\n\tgetTotalItemsInCart = () => {\r\n\t\tif (localStorage.getItem(\"countQuantityAsTotalItemsOnCart\") === \"true\") {\r\n\t\t\tlet total = 0;\r\n\t\t\tthis.props.cartProducts.forEach((item) => {\r\n\t\t\t\ttotal += item.quantity;\r\n\t\t\t});\r\n\t\t\treturn total;\r\n\t\t} else {\r\n\t\t\treturn this.props.cartTotal.productQuantity;\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tif (this.state.userBan) {\r\n\t\t\treturn <UserBan />;\r\n\t\t}\r\n\t\tif (localStorage.getItem(\"hideDesktopView\") !== \"true\" &&  window.innerWidth > 768) {\r\n\t\t\treturn <Redirect to=\"/\" />;\r\n\t\t}\r\n\t\tif (!this.props.cartProducts.length) {\r\n\t\t\tdocument.getElementsByTagName(\"body\")[0].classList.remove(\"bg-grey\");\r\n\t\t}\r\n\t\tconst { cartTotal, cartProducts, restaurant_info, user } = this.props;\r\n\r\n\t\tlet deliveryComponents;\r\n\t\tif (restaurant_info && restaurant_info.has_scheduled_delivery) {\r\n\t\t\tif (restaurant_info.schedule_type === 2) {\r\n\t\t\t\tdeliveryComponents = (\r\n\t\t\t\t<ScheduledDelivery restaurant={restaurant_info} scheduleType={restaurant_info.schedule_type} onTimeSlotSelected={this.handleTimeSlotSelected} />\r\n\t\t\t\t);\r\n\t\t\t} else if (restaurant_info.schedule_type === 3) {\r\n\t\t\t\tdeliveryComponents = (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<AppBar position=\"static\" color=\"default\">\r\n\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\tvalue={this.state.activeTab === null ? false : this.state.activeTab} // Add this conditional\r\n\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\t\t\tvariant=\"fullWidth\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Tab label=\"Instant Delivery\" />\r\n\t\t\t\t\t\t<Tab label=\"Scheduled Delivery\" />\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t\t{this.state.activeTab === 0 && (\r\n\t\t\t\t\t<> {/* Render Instant Delivery Component here */} </>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{this.state.activeTab === 1 && (\r\n\t\t\t\t\t<ScheduledDelivery restaurant={restaurant_info} scheduleType={restaurant_info.schedule_type} onTimeSlotSelected={this.handleTimeSlotSelected} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</>\r\n\t\t\t\t);\r\n\t\t\t} else if (restaurant_info.schedule_type === 1) {\r\n\t\t\t\tdeliveryComponents = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// console.log('deliveryMethod', this.state.deliveryMethod);\r\n\t\t// console.log('showCheckbox', this.state.showCheckbox);\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Meta\r\n\t\t\t\t\tseotitle={localStorage.getItem(\"cartPageTitle\")}\r\n\t\t\t\t\tseodescription={localStorage.getItem(\"seoMetaDescription\")}\r\n\t\t\t\t\togtype=\"website\"\r\n\t\t\t\t\togtitle={localStorage.getItem(\"seoOgTitle\")}\r\n\t\t\t\t\togdescription={localStorage.getItem(\"seoOgDescription\")}\r\n\t\t\t\t\togurl={window.location.href}\r\n\t\t\t\t\ttwittertitle={localStorage.getItem(\"seoTwitterTitle\")}\r\n\t\t\t\t\ttwitterdescription={localStorage.getItem(\"seoTwitterDescription\")}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{(this.state.loading ||\r\n\t\t\t\t\tthis.state.process_distance_calc_loading ||\r\n\t\t\t\t\tthis.state.process_cart_loading) && (\r\n\t\t\t\t\t<div className=\"height-100 overlay-loading ongoing-payment-spin\">\r\n\t\t\t\t\t\t<div className=\"spin-load\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{!this.state.loading && (\r\n\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t<BackWithSearch\r\n\t\t\t\t\t\t\tboxshadow={true}\r\n\t\t\t\t\t\t\thas_title={true}\r\n\t\t\t\t\t\t\ttitle={restaurant_info && this.getTotalItemsInCart() > 0 ? restaurant_info.name : localStorage.getItem(\"cartPageTitle\")}\r\n\t\t\t\t\t\t\tdisable_search={true}\r\n\t\t\t\t\t\t\thomeButton={false}\r\n\t\t\t\t\t\t\ttotalCartItem={this.getTotalItemsInCart()}\r\n\t\t\t\t\t\t\thasStore={restaurant_info && this.getTotalItemsInCart() > 0 ? true : false}\r\n\t\t\t\t\t\t\teta={restaurant_info.delivery_time}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{cartProducts.length ? (\r\n\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"customCartMessage\") !== \"<p><br></p>\" &&\r\n\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"customCartMessage\") !== \"null\" &&\r\n\t\t\t\t\t\t\t\t\t(localStorage.getItem(\"customCartMessage\") !== \"\" && (\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tpaddingTop: \"4rem\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tmarginBottom: \"-3rem\",\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t__html: localStorage.getItem(\"customCartMessage\"),\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\r\n\t\t\t\t\t\t\t\t<RestaurantInfoCart restaurant={restaurant_info} />\r\n\r\n\t\t\t\t\t\t\t\t{user.success &&\r\n\t\t\t\t\t\t\t\t\tparseInt(restaurant_info.is_schedulable) === 1 &&\r\n\t\t\t\t\t\t\t\t\tparseInt(restaurant_info.accept_scheduled_orders) === 1 &&\r\n\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"enableOrderSchedulingOnCustomer\") === \"true\" &&\r\n\t\t\t\t\t\t\t\t\trestaurant_info.schedule_data !== null &&\r\n\t\t\t\t\t\t\t\t\tthis.state.is_active && <OrderScheduling restaurant={restaurant_info} />}\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"mt-5 pb-15\">\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclassName={`block-content block-content-full bg-white pb-5 ${localStorage.getItem(\"enSPU\") === \"true\" && restaurant_info.delivery_type === 3 ? \"pt-10\" : \"padding-top-65\"}`}\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ borderTopLeftRadius: \"5px\", borderTopRightRadius: \"5px\" }}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<h2 className=\"item-text mb-10\">\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartItemsInCartText\")}\r\n\t\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t\t{cartProducts.map((item, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<CartItems\r\n\t\t\t\t\t\t\t\t\t\t\t\titem={item}\r\n\t\t\t\t\t\t\t\t\t\t\t\taddProductQuantity={this.addProductQuantity}\r\n\t\t\t\t\t\t\t\t\t\t\t\tremoveProductQuantity={this.removeProductQuantity}\r\n\t\t\t\t\t\t\t\t\t\t\t\tremoveProduct={this.removeProduct}\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={item.name + item.id + index}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<OrderComment />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{this.state.show_schedule && (\r\n\t\t\t\t\t\t\t\t<div className=\"bg-white mb-15\">\r\n\t\t\t\t\t\t\t\t\t{deliveryComponents}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{(this.state.tipsAmountSetting || this.state.tipsPercentageSetting) && (\r\n\t\t\t\t\t\t\t\t\t<div className=\"mb-15 tips-block\">\r\n\t\t\t\t\t\t\t\t\t\t{this.state.tips && this.state.is_tips_show === false && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"block-content block-content-full bg-white\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!this.state.tipsAmountSetting &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!this.state.tipsPercentageSetting\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"d-none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"d-show\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"item-text d-flex mb-2 pb-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"mr-2 tip-icon\"><i className=\"icon-tip tip-icon\"></i></span><span className=\"tip-text\"><strong>{localStorage.getItem(\"tipsForDeliveryText\")}</strong></span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p> {localStorage.getItem(\"tipsThanksText\")}.</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.state.tipsAmountSetting && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"tip-switch-field\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.tips.map((tipAmount, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div key={index} className=\"tips\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={tipAmount}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"switch-two\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.addTip(\"amount\", tipAmount)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thtmlFor={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`tip-box ${index > 0 && \"ml-5\"}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"left\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tipAmount}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"right\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"tips\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"other\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"others\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"switch-two\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(event) => this.showOtherText(\"total\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"others\" className=\"tip-box ml-5\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"tipsOtherText\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.state.others && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control custom-tip-input mb-15\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"flatAmount\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={localStorage.getItem(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"cartTipAmountPlaceholderText\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.flatAmount || \"\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.restrictAlphabates}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonKeyPress={this.restrictAlphabates}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmax=\"10000\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.state.tipsPercentageSetting && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"tip-switch-field\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.tips_percentage.map((tipPercentage, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div key={index} className=\"tips_percentage\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={tipPercentage}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={`${index}_tips_percentage`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"switch-two\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.addTipInPercentage(\"amount\", tipPercentage)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thtmlFor={`${index}_tips_percentage`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={` ${index > 0 && \"ml-5\"}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tipPercentage}%\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"tips\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"percentage\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"percentage\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"switch-two\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.showOtherText(\"percentage\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"percentage\" className=\"ml-5\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"tipsOtherText\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.state.percentage && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control custom-tip-input mb-15\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"percentageValue\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={localStorage.getItem(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"cartTipPercentagePlaceholderText\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.percentageValue || \"\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.restrictAlphabates}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonKeyPress={this.restrictAlphabates}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmax=\"100\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<CouponSuccess handleCouponDialog={this.handleCouponDialog} open={this.state.showSuccess}  />\r\n\t\t\t\t\t\t\t\t\t<NewCoupon subtotal={this.props.cartTotal.totalPrice} />\r\n\t\t\t\t\t\t\t\t\t{/* <Coupon subtotal={this.props.cartTotal.totalPrice} /> */}\r\n\t\t\t\t\t\t\t\t\t{this.state.alreadyRunningOrders && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"px-15\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"auth-error ongoing-order-notify\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<DelayLink to=\"/my-orders\" delay={250} className=\"ml-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"ongoingOrderMsg\")}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"si si-arrow-right ml-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: \"0.7rem\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Ink duration=\"500\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</DelayLink>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t{Object.keys(this.props.restaurant_info).length > 0 && (\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<BillDetails\r\n\t\t\t\t\t\t\t\t\t\t\ttotal={cartTotal.totalPrice}\r\n\t\t\t\t\t\t\t\t\t\t\tdistance={this.state.distance}\r\n\t\t\t\t\t\t\t\t\t\t\talreadyRunningOrders={this.state.alreadyRunningOrders}\r\n\t\t\t\t\t\t\t\t\t\t\ttips={this.state.selectedTips}\r\n\t\t\t\t\t\t\t\t\t\t\tremoveTip={this.removeTip}\r\n\t\t\t\t\t\t\t\t\t\t\tcartProducts={this.props.cartProducts}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t{this.state.is_operational_loading ? (\r\n\t\t\t\t\t\t\t\t\t<Loading />\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t{this.state.is_active ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.state.min_order_satisfied ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.is_all_items_available && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.show_schedule && restaurant_info.has_scheduled_delivery && (restaurant_info.schedule_type === 2 || restaurant_info.schedule_type === 3) ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.showCheckbox === true ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CartCheckoutBlock\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trestaurant_id={this.props.restaurant_info.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcart_page={this.context.router.route.location.pathname}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tis_operational_loading={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.is_operational_loading\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tis_operational={this.state.is_operational}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleProcessCartLoading={this.handleProcessCartLoading}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheckForItemsAvailability={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.checkForItemsAvailability\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleItemsAvailability={this.handleItemsAvailability}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teta={this.props.restaurant_info.delivery_time}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t):(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"auth-error no-click\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"error-shake\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSelect Delivery Slot\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t):(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CartCheckoutBlock\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trestaurant_id={this.props.restaurant_info.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcart_page={this.context.router.route.location.pathname}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tis_operational_loading={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.is_operational_loading\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tis_operational={this.state.is_operational}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleProcessCartLoading={this.handleProcessCartLoading}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheckForItemsAvailability={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.checkForItemsAvailability\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleItemsAvailability={this.handleItemsAvailability}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\teta={this.props.restaurant_info.delivery_time}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"auth-error no-click\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"error-shake\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"restaurantMinOrderMessage\")}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.props.restaurant_info.min_order_price}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"auth-error no-click\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"error-shake\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{this.props.restaurant_info && this.props.restaurant_info.name} :{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"notAcceptingOrdersMsg\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div className=\"bg-white cart-empty-block\">\r\n\t\t\t\t\t\t\t\t<Swing>\r\n\t\t\t\t\t\t\t\t\t<div className=\"d-flex justify-content-center\">\r\n\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"cart-empty-img\"\r\n\t\t\t\t\t\t\t\t\t\t\tsrc=\"/assets/img/various/cart-empty.png\"\r\n\t\t\t\t\t\t\t\t\t\t\talt={localStorage.getItem(\"cartEmptyText\")}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Swing>\r\n\t\t\t\t\t\t\t\t<h2 className=\"cart-empty-text mt-50 text-center\">\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"cartEmptyText\")}\r\n\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t{this.state.alreadyRunningOrders && (\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"auth-error ongoing-order-notify\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tposition: \"fixed\",\r\n\t\t\t\t\t\t\t\t\t\t\tbottom: \"4.5rem\",\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<DelayLink to=\"/my-orders\" delay={250} className=\"ml-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"ongoingOrderMsg\")}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t<i className=\"si si-arrow-right ml-1\" style={{ fontSize: \"0.7rem\" }} />\r\n\t\t\t\t\t\t\t\t\t\t\t<Ink duration=\"500\" />\r\n\t\t\t\t\t\t\t\t\t\t</DelayLink>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t<Footer active_cart={true} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t)}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\trestaurant_info: state.items.restaurant_info,\r\n\tcartProducts: state.cart.products,\r\n\tcartTotal: state.total.data,\r\n\tuser: state.user.user,\r\n\trunning_order: state.user.running_order,\r\n\trestaurant: state.restaurant,\r\n\tcoupon: state.coupon.coupon,\r\n\tforce_reload: state.helper.force_reload,\r\n\ttips: state.tips,\r\n\ttips_percentage: state.tips_percentage,\r\n\tconfirmCart: state.confirmCart.confirmCart,\r\n});\r\n\r\nexport default GoogleApiWrapper({\r\n\tapiKey: localStorage.getItem(\"googleApiKey\"),\r\n\tLoadingContainer: Loading,\r\n})(\r\n\tconnect(\r\n\t\tmapStateToProps,\r\n\t\t{\r\n\t\t\tcheckUserRunningOrder,\r\n\t\t\tupdateCart,\r\n\t\t\tgetRestaurantInfoById,\r\n\t\t\tupdateUserInfo,\r\n\t\t\taddProduct,\r\n\t\t\tcheckCartItemsAvailability,\r\n\t\t\tcheckBan,\r\n\t\t\tgetRestaurantInfoAndOperationalStatus,\r\n\t\t\tremoveCoupon,\r\n\t\t}\r\n\t)(Cart)\r\n);\r\n"],"sourceRoot":""}