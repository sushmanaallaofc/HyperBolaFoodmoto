{"version":3,"sources":["services/rating/actions.js","components/Mobile/StoreReviews/index.js"],"names":["__webpack_require__","d","__webpack_exports__","getReviewsForStore","addRating","getOrderDetails","_actionTypes__WEBPACK_IMPORTED_MODULE_0__","_items_actionTypes__WEBPACK_IMPORTED_MODULE_1__","_configs__WEBPACK_IMPORTED_MODULE_2__","axios__WEBPACK_IMPORTED_MODULE_3__","axios__WEBPACK_IMPORTED_MODULE_3___default","n","slug","dispatch","Axios","get","GET_REVIEWS_OF_STORE_URL","then","response","restaurant","data","reviews","type","GET_RESTAURANT_INFO","payload","GET_REVIEWS_OF_STORE","catch","error","console","log","post","ADD_RATING_URL","order_id","token","auth_token","rating_store","rating_delivery","review_store","review_delivery","rating","ADD_RATING_FOR_ORDER","GET_RATABLE_ORDER_DETAILS_URL","GET_RATABLE_ORDER_DETAILS","StoreReviews","state","loading","getRatingStars","colorClass","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","_this2","this","props","user","success","getRestaurantInfoForLoggedInUser","match","params","getRestaurantInfo","setState","_this3","_this$props","restaurant_info","Fragment","_helpers_meta__WEBPACK_IMPORTED_MODULE_8__","seotitle","localStorage","getItem","seodescription","ogtype","ogtitle","ogdescription","ogurl","window","location","href","twittertitle","twitterdescription","_Elements_BackWithSearch__WEBPACK_IMPORTED_MODULE_9__","boxshadow","has_title","title","disable_search","homeButton","_helpers_loading__WEBPACK_IMPORTED_MODULE_10__","_Items_RestaurantInfo__WEBPACK_IMPORTED_MODULE_11__","history","withLinkToRestaurant","map","review","username","Component","contextTypes","router","connect","items"],"mappings":"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","file":"static/js/40.e87fd6e5.chunk.js","sourcesContent":["import { GET_REVIEWS_OF_STORE, ADD_RATING_FOR_ORDER, GET_RATABLE_ORDER_DETAILS } from \"./actionTypes\";\r\nimport { GET_RESTAURANT_INFO } from \"../items/actionTypes\";\r\n\r\nimport { GET_REVIEWS_OF_STORE_URL, ADD_RATING_URL, GET_RATABLE_ORDER_DETAILS_URL } from \"../../configs\";\r\nimport Axios from \"axios\";\r\n\r\nexport const getReviewsForStore = (slug) => (dispatch) => {\r\n\treturn Axios.get(GET_REVIEWS_OF_STORE_URL + \"/\" + slug)\r\n\t\t.then((response) => {\r\n\t\t\tconst restaurant = response.data.restaurant;\r\n\t\t\tconst reviews = response.data.reviews;\r\n\r\n\t\t\treturn [\r\n\t\t\t\tdispatch({ type: GET_RESTAURANT_INFO, payload: restaurant }),\r\n\t\t\t\tdispatch({ type: GET_REVIEWS_OF_STORE, payload: reviews }),\r\n\t\t\t];\r\n\t\t})\r\n\t\t.catch(function(error) {\r\n\t\t\tconsole.log(error);\r\n\t\t});\r\n};\r\n\r\nexport const addRating = (data) => (dispatch) => {\r\n\treturn Axios.post(ADD_RATING_URL, {\r\n\t\torder_id: data.order_id,\r\n\t\ttoken: data.auth_token,\r\n\t\trating_store: data.rating_store,\r\n\t\trating_delivery: data.rating_delivery,\r\n\t\treview_store: data.review_store,\r\n\t\treview_delivery: data.review_delivery,\r\n\t})\r\n\t\t.then((response) => {\r\n\t\t\tconst rating = response.data;\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: ADD_RATING_FOR_ORDER,\r\n\t\t\t\tpayload: rating,\r\n\t\t\t});\r\n\t\t})\r\n\t\t.catch(function(error) {\r\n\t\t\tconsole.log(error);\r\n\t\t});\r\n};\r\n\r\nexport const getOrderDetails = (order_id, token) => (dispatch) => {\r\n\tAxios.post(GET_RATABLE_ORDER_DETAILS_URL, {\r\n\t\torder_id: order_id,\r\n\t\ttoken: token,\r\n\t})\r\n\t\t.then((response) => {\r\n\t\t\tconst rating = response.data;\r\n\t\t\treturn dispatch({\r\n\t\t\t\ttype: GET_RATABLE_ORDER_DETAILS,\r\n\t\t\t\tpayload: rating,\r\n\t\t\t});\r\n\t\t})\r\n\t\t.catch(function(error) {\r\n\t\t\tconsole.log(error);\r\n\t\t});\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { getReviewsForStore } from \"../../../services/rating/actions\";\r\nimport Meta from \"../../helpers/meta\";\r\nimport BackWithSearch from \"../Elements/BackWithSearch\";\r\nimport Loading from \"../../helpers/loading\";\r\nimport RestaurantInfo from \"../Items/RestaurantInfo\";\r\nimport { getRestaurantInfo, getRestaurantInfoForLoggedInUser } from \"../../../services/items/actions\";\r\n\r\nclass StoreReviews extends Component {\r\n\tstatic contextTypes = {\r\n\t\trouter: () => null,\r\n\t};\r\n\r\n\tstate = {\r\n\t\tloading: true,\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\t// console.log(this.props.match.params.slug);\r\n\t\tconst { user } = this.props;\r\n\r\n\t\tuser.success\r\n\t\t\t? this.props.getRestaurantInfoForLoggedInUser(this.props.match.params.slug)\r\n\t\t\t: this.props.getRestaurantInfo(this.props.match.params.slug);\r\n\r\n\t\tthis.props.getReviewsForStore(this.props.match.params.slug).then((response) => {\r\n\t\t\tif (response) {\r\n\t\t\t\tthis.setState({ loading: false });\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tgetRatingStars = (rating) => {\r\n\t\tvar colorClass = \"rating-green\";\r\n\t\t// 4-5 = green, 3 = orange, < 2 = red\r\n\t\tif (rating <= 3) {\r\n\t\t\tcolorClass = \"rating-orange\";\r\n\t\t}\r\n\t\tif (rating <= 2) {\r\n\t\t\tcolorClass = \"rating-red\";\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<span className={\"store-rating \" + colorClass}>\r\n\t\t\t\t{rating} <i className=\"fa fa-star text-white\" />\r\n\t\t\t</span>\r\n\t\t);\r\n\t};\r\n\trender() {\r\n\t\tconst { reviews, restaurant_info } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Meta\r\n\t\t\t\t\tseotitle={localStorage.getItem(\"reviewsPageTitle\")}\r\n\t\t\t\t\tseodescription={localStorage.getItem(\"seoMetaDescription\")}\r\n\t\t\t\t\togtype=\"website\"\r\n\t\t\t\t\togtitle={localStorage.getItem(\"seoOgTitle\")}\r\n\t\t\t\t\togdescription={localStorage.getItem(\"seoOgDescription\")}\r\n\t\t\t\t\togurl={window.location.href}\r\n\t\t\t\t\ttwittertitle={localStorage.getItem(\"seoTwitterTitle\")}\r\n\t\t\t\t\ttwitterdescription={localStorage.getItem(\"seoTwitterDescription\")}\r\n\t\t\t\t/>\r\n\t\t\t\t<BackWithSearch\r\n\t\t\t\t\tboxshadow={true}\r\n\t\t\t\t\thas_title={true}\r\n\t\t\t\t\ttitle={localStorage.getItem(\"reviewsPageTitle\")}\r\n\t\t\t\t\tdisable_search={true}\r\n\t\t\t\t\thomeButton={true}\r\n\t\t\t\t/>\r\n\t\t\t\t{this.state.loading ? (\r\n\t\t\t\t\t<Loading />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t{/* <RestaurantInfo restaurant={restaurant_info} /> */}\r\n\t\t\t\t\t\t<RestaurantInfo\r\n\t\t\t\t\t\t\thistory={this.props.history}\r\n\t\t\t\t\t\t\trestaurant={restaurant_info}\r\n\t\t\t\t\t\t\twithLinkToRestaurant={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div className=\"pt-20 px-15 height-100 bg-light\">\r\n\t\t\t\t\t\t\t{reviews.map((review) => (\r\n\t\t\t\t\t\t\t\t<div className=\"single-review\">\r\n\t\t\t\t\t\t\t\t\t<p className=\"mb-0\">\r\n\t\t\t\t\t\t\t\t\t\t<strong>{review.username}</strong>{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"ml-1\">{this.getRatingStars(review.rating_store)}</span>\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<p className=\"mb-2\">{review.review_store}</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t)}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\treviews: state.rating.reviews,\r\n\trestaurant_info: state.items.restaurant_info,\r\n\tuser: state.user.user,\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{\r\n\t\tgetReviewsForStore,\r\n\t\tgetRestaurantInfo,\r\n\t\tgetRestaurantInfoForLoggedInUser,\r\n\t}\r\n)(StoreReviews);\r\n"],"sourceRoot":""}