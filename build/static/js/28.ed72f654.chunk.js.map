{"version":3,"sources":["services/Delivery/gpslocation/actions.js","components/Delivery/ShareLiveLocation/index.js","components/Delivery/DeliveryDesktop/index.js","components/Delivery/index.js"],"names":["__webpack_require__","d","__webpack_exports__","sendDeliveryGuyGpsLocation","getDeliveryGuyGpsLocation","_actionTypes__WEBPACK_IMPORTED_MODULE_0__","_configs__WEBPACK_IMPORTED_MODULE_1__","axios__WEBPACK_IMPORTED_MODULE_2__","axios__WEBPACK_IMPORTED_MODULE_2___default","n","token","user_id","delivery_lat","delivery_long","heading","dispatch","Axios","post","SEND_DELIVERY_GUY_GPS_LOCATION_URL","then","response","data","type","SEND_DELIVERY_GUY_GPS_LOCATION","payload","catch","error","console","log","order_id","GET_DELIVERY_GUY_GPS_LOCATION_URL","GET_DELIVERY_GUY_GPS_LOCATION","ShareLiveLocation","state","gpsAccessError","lat","lng","__sendGpsLocation","position","_this","props","delivery_user","auth_token","id","coords","latitude","longitude","_this2","this","location","navigator","geolocation","refreshSetInterval","setInterval","getCurrentPosition","userAgent","window","Android","setState","enableHighAccuracy","clearInterval","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","Fragment","className","style","bottom","localStorage","getItem","Component","connect","DeliveryDesktop","react_default","fontSize","opacity","Delivery","document","querySelector","setAttribute","getElementsByTagName","classList","remove","add","success","firebase","isSupported","handler","saveNotificationToken","messaging","requestPermission","Object","asyncToGenerator","regenerator_default","mark","_callee","push_token","wrap","_context","prev","next","getToken","sent","stop","err","innerWidth","Delivery_DeliveryDesktop","meta","seotitle","seodescription","ogtype","ogtitle","ogdescription","ogurl","href","twittertitle","twitterdescription","Orders","Redirect","to"],"mappings":"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","file":"static/js/28.ed72f654.chunk.js","sourcesContent":["import { SEND_DELIVERY_GUY_GPS_LOCATION, GET_DELIVERY_GUY_GPS_LOCATION } from \"./actionTypes\";\r\nimport { SEND_DELIVERY_GUY_GPS_LOCATION_URL, GET_DELIVERY_GUY_GPS_LOCATION_URL } from \"../../../configs\";\r\nimport Axios from \"axios\";\r\n\r\nexport const sendDeliveryGuyGpsLocation = (token, user_id, delivery_lat, delivery_long, heading) => dispatch => {\r\n    Axios.post(SEND_DELIVERY_GUY_GPS_LOCATION_URL, {\r\n        token: token,\r\n        user_id: user_id,\r\n        delivery_lat: delivery_lat,\r\n        delivery_long: delivery_long,\r\n        heading: heading\r\n    })\r\n        .then(response => {\r\n            const data = response.data;\r\n            return dispatch({ type: SEND_DELIVERY_GUY_GPS_LOCATION, payload: data });\r\n        })\r\n        .catch(function(error) {\r\n            console.log(error);\r\n        });\r\n};\r\n\r\nexport const getDeliveryGuyGpsLocation = (token, order_id) => dispatch => {\r\n    Axios.post(GET_DELIVERY_GUY_GPS_LOCATION_URL, {\r\n        token: token,\r\n        order_id: order_id\r\n    })\r\n        .then(response => {\r\n            const data = response.data;\r\n            return dispatch({ type: GET_DELIVERY_GUY_GPS_LOCATION, payload: data });\r\n        })\r\n        .catch(function(error) {\r\n            console.log(error);\r\n        });\r\n};\r\n","import React, { Component } from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { sendDeliveryGuyGpsLocation } from \"../../../services/Delivery/gpslocation/actions\";\r\n\r\nclass ShareLiveLocation extends Component {\r\n\tstate = {\r\n\t\tgpsAccessError: false,\r\n\t\tlat: null,\r\n\t\tlng: null,\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst location = navigator && navigator.geolocation;\r\n\r\n\t\tif (location) {\r\n\t\t\tthis.refreshSetInterval = setInterval(() => {\r\n\t\t\t\tlocation.getCurrentPosition(\r\n\t\t\t\t\t(position) => {\r\n\t\t\t\t\t\tthis.__sendGpsLocation(position);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t(error) => {\r\n\t\t\t\t\t\tif (navigator.userAgent === \"FoodomaaAndroidWebViewUA\" && window.Android !== \"undefined\") {\r\n\t\t\t\t\t\t\tthis.setState({ gpsAccessError: false });\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log(\"Inside error\");\r\n\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\tthis.setState({ gpsAccessError: true });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tenableHighAccuracy: true,\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}, 15000);\r\n\t\t}\r\n\t}\r\n\r\n\t__sendGpsLocation = (position) => {\r\n\t\tthis.props.sendDeliveryGuyGpsLocation(\r\n\t\t\tthis.props.delivery_user.data.auth_token,\r\n\t\t\tthis.props.delivery_user.data.id,\r\n\t\t\tposition.coords.latitude,\r\n\t\t\tposition.coords.longitude,\r\n\t\t\tposition.coords.heading\r\n\t\t);\r\n\t};\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearInterval(this.refreshSetInterval);\r\n\t\tconsole.log(\"Cleared API CALL\");\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div className=\"pt-50\">\r\n\t\t\t\t\t{this.state.gpsAccessError && (\r\n\t\t\t\t\t\t<div className=\"auth-error location-error\" style={{ bottom: \"5rem\" }}>\r\n\t\t\t\t\t\t\t<div className=\"error-shake\">{localStorage.getItem(\"allowLocationAccessMessage\")}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tdelivery_user: state.delivery_user.delivery_user,\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ sendDeliveryGuyGpsLocation }\r\n)(ShareLiveLocation);\r\n","import React, { Component } from \"react\";\r\n\r\nclass DeliveryDesktop extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div className=\"content-center text-center text-muted font-w600\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<i className=\"si si-screen-smartphone mb-2\" style={{ fontSize: \"4rem\", opacity: \"0.5\" }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>{localStorage.getItem(\"deliveryUsePhoneToAccessMsg\")}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DeliveryDesktop;\r\n","import * as firebase from \"firebase/app\";\r\n\r\nimport React, { Component } from \"react\";\r\n\r\nimport Meta from \"../helpers/meta\";\r\nimport Orders from \"./Orders\";\r\n\r\nimport { Redirect } from \"react-router\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport messaging from \"../../init-fcm\";\r\nimport { saveNotificationToken } from \"../../services/notification/actions\";\r\nimport ShareLiveLocation from \"./ShareLiveLocation\";\r\nimport DeliveryDesktop from \"./DeliveryDesktop\";\r\n\r\nclass Delivery extends Component {\r\n\tasync componentDidMount() {\r\n\t\tif (document.querySelector(\"#mainManifest\")) {\r\n\t\t\tdocument.querySelector(\"#mainManifest\").setAttribute(\"href\", \"/delivery-manifest.json\");\r\n\t\t}\r\n\t\tif (document.getElementsByTagName(\"body\")) {\r\n\t\t\tdocument.getElementsByTagName(\"body\")[0].classList.remove(\"bg-grey\");\r\n\t\t\tdocument.getElementsByTagName(\"body\")[0].classList.add(\"delivery-dark-bg\");\r\n\t\t}\r\n\r\n\t\tconst { delivery_user } = this.props;\r\n\r\n\t\tif (delivery_user.success) {\r\n\t\t\tif (firebase.messaging.isSupported()) {\r\n\t\t\t\tlet handler = this.props.saveNotificationToken;\r\n\t\t\t\tmessaging\r\n\t\t\t\t\t.requestPermission()\r\n\t\t\t\t\t.then(async function() {\r\n\t\t\t\t\t\tconst push_token = await messaging.getToken();\r\n\t\t\t\t\t\thandler(push_token, delivery_user.data.id, delivery_user.data.auth_token);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function(err) {\r\n\t\t\t\t\t\tconsole.log(\"Unable to get permission to notify.\", err);\r\n\t\t\t\t\t});\r\n\t\t\t\t// navigator.serviceWorker.addEventListener(\"message\", message => console.log(message));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (window.innerWidth > 768) {\r\n\t\t\treturn <DeliveryDesktop />;\r\n\t\t}\r\n\t\tconst { delivery_user } = this.props;\r\n\r\n\t\tif (!delivery_user.success) {\r\n\t\t\treturn <Redirect to={\"/delivery/login\"} />;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Meta\r\n\t\t\t\t\tseotitle=\"Delivery Orders\"\r\n\t\t\t\t\tseodescription={localStorage.getItem(\"seoMetaDescription\")}\r\n\t\t\t\t\togtype=\"website\"\r\n\t\t\t\t\togtitle={localStorage.getItem(\"seoOgTitle\")}\r\n\t\t\t\t\togdescription={localStorage.getItem(\"seoOgDescription\")}\r\n\t\t\t\t\togurl={window.location.href}\r\n\t\t\t\t\ttwittertitle={localStorage.getItem(\"seoTwitterTitle\")}\r\n\t\t\t\t\ttwitterdescription={localStorage.getItem(\"seoTwitterDescription\")}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<Orders />\r\n\t\t\t\t{navigator.userAgent !== \"FoodomaaAndroidWebViewUA\" && <ShareLiveLocation />}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tdelivery_user: state.delivery_user.delivery_user,\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ saveNotificationToken }\r\n)(Delivery);\r\n"],"sourceRoot":""}